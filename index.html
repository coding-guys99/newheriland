<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>HeriLand — Tabs + Settings</title>

  <!-- 你的 CSS（沿用現有 app.css） -->
  <link rel="stylesheet" href="css/app.css"/>
  <link rel="stylesheet" href="css/settings-drawer.css">
  <link rel="stylesheet" href="css/tabbar.css"/>
  <link rel="stylesheet" href="css/explore.css"/>
  <link rel="stylesheet" href="css/add.css"/>
  <link rel="stylesheet" href="css/home.css"/>
  <link rel="stylesheet" href="css/search-overlay.css">
  <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/saved.css">
  <link rel="stylesheet" href="css/photo.css">
  <link rel="stylesheet" href="css/feedback.css">
  <link rel="stylesheet" href="css/contact.css">
  <link rel="stylesheet" href="css/reviews.css">
    <link rel="stylesheet" href="css/merchant.css">
  <link rel="stylesheet" href="css/about.css">
  <link rel="stylesheet" href="css/rate.css">
    <link rel="stylesheet" href="css/terms.css">
    <link rel="stylesheet" href="css/trips.css">
</head>
<body>

  <!-- 頂部：品牌 + 齒輪 -->
  <header class="header">
    <div class="inner">
      <div class="brand">HeriLand</div>
      <div class="header-actions" style="display:flex;align-items:center;gap:10px">
        <button class="search-pill" id="openSearch" aria-label="Open search">🔎 Search places</button>
        <button id="btnOpenSettings" class="icon-btn" aria-label="Settings" title="Settings">⚙︎</button>
      </div>
    </div>
  </header>

  <main id="app">
    <!-- ====== 主頁們（單頁多分頁） ====== -->

    <!-- Home -->
    <!-- ===================== Home (Landing / 導流首頁) ===================== -->
<section data-page="home" hidden aria-labelledby="h-home">

  <div class="home-wrap">
    <!-- Hero Carousel -->
    <section class="home-hero" aria-label="Highlights">
      <div class="hero-track" id="heroTrack" tabindex="0" role="list"></div>
      <div class="hero-dots" id="heroDots" role="tablist" aria-label="Hero slides"></div>
    </section>

    <!-- 功能捷徑 2×4 -->
    <section class="home-features" aria-label="Quick actions">
      <div class="feat-row" id="homeFeatures"></div>
    </section>

    <!-- Combo：左滑軌 × 右四格 -->
    <section class="home-combo" aria-label="Campaigns">
      <div class="combo-left">
        <div class="combo-track" id="comboLeft" role="list"></div>
        <div class="combo-dots" id="comboDots" role="tablist" aria-label="Campaign slider"></div>
      </div>
      <div class="combo-right" id="comboRight"></div>
    </section>

    <!-- 城市推薦（精簡入口） -->
    <section class="home-cities" aria-label="Cities">
      <h2 class="sec-ttl">城市推薦</h2>
      <div class="city-row" id="cityRow"></div>
    </section>

    <!-- Mid Ad -->
    <section class="home-ad" aria-label="Featured partner">
      <a id="adSlot" class="ad-card" href="#" aria-label="Sponsored">
        <img alt="Sponsored" loading="lazy" />
      </a>
    </section>

    <!-- Collections（話題集合） -->
    <section class="home-collections" aria-label="Collections">
      <h2 class="sec-ttl">主題集合</h2>
      <div class="col-row" id="colRow"></div>
    </section>

    <!-- 多人主題 -->
    <section class="home-groups" aria-label="Group themes">
      <h2 class="sec-ttl">多人主題</h2>
      <div class="group-row" id="groupRow"></div>
    </section>

    <!-- 在地 Spotlight -->
    <section class="home-spotlight" aria-label="Spotlight">
      <h2 class="sec-ttl">在地策展</h2>
      <div class="spotlight-row" id="spotlightRow"></div>
    </section>

    <!-- 輕量在地小物（可關閉此段） -->
    <section class="home-goods" aria-label="Local picks">
      <h2 class="sec-ttl">在地小物</h2>
      <div class="goods-row" id="goodsRow"></div>
    </section>

    <div class="home-safe-bottom" aria-hidden="true"></div>
  </div>
</section>

    <!-- Explore -->
<section data-page="explore" aria-labelledby="h-explore" class="section" hidden>
  <h1 id="h-explore" data-focusable-heading>Explore</h1>

  <!-- 城市牆：固定 4 x 3（由 JS 注入） -->
  <div class="citywall" role="tablist" aria-label="Cities" id="cityWall">
    <button class="citycell" role="tab" aria-selected="true">
      <span class="ico">🏛️</span>
      <span class="name">Kuching</span>
    </button>
  </div>

  <!-- 輕量篩選列：只留 Sort / Open / Filter -->
  <div class="filters" id="expFilters" aria-label="Filters">
    <div class="chips chips--quick" role="group" aria-label="Quick filters">
      <button class="chip" data-sort="latest" aria-pressed="true">⏱️ <span>Latest</span></button>
      <button class="chip" data-sort="hot" aria-pressed="false">🔥 <span>Hot</span></button>
      <button class="chip" data-open="true" aria-pressed="false">🟢 <span>Open now</span></button>
      <button class="chip chip--primary" id="btnOpenFilter">🎯 <span>Filter</span></button>
    </div>
  </div>

  <!-- 已套用條件摘要（JS 生成 chips，可逐一清除） -->
  <div id="activeFilters" class="active-filters" hidden></div>

  <!-- 這個是給 explore.js 用的狀態字串（隱藏即可） -->
  <div id="resultHead" class="sr-only">Pick a city above</div>

  <!-- 骨架 -->
  <div class="skeleton-list" id="skList" hidden>
    <div class="sk-row"></div><div class="sk-row"></div><div class="sk-row"></div>
    <div class="sk-row"></div><div class="sk-row"></div><div class="sk-row"></div>
  </div>

  <!-- 空狀態 -->
  <div class="empty-state" id="emptyState" hidden>
    <div class="empty-emoji">🫙</div>
    <div class="empty-title">No places yet</div>
    <div class="empty-sub">Try another city or check back later.</div>
  </div>

  <!-- 錯誤狀態 -->
  <div class="error-state" id="errorState" hidden role="alert">
    <div class="err-emoji">😵</div>
    <div class="err-title">Failed to load</div>
    <div class="err-sub">Please check your connection and try again.</div>
    <button class="err-retry" id="btnRetry">Retry</button>
  </div>

  <!-- 實際清單 -->
  <div class="merchant-list" id="merchantList" hidden></div>
</section>

<!-- Advanced Filters Drawer -->
<section id="advFilter" class="overlay-page tertiary" hidden aria-labelledby="h-advfilter">
  <header class="subappbar settings-header">
    <button class="icon-btn back" id="btnAdvClose" aria-label="Close">←</button>
    <h1 id="h-advfilter" class="settings-title" tabindex="-1">Filters</h1>
  </header>

  <div class="settings-panel">
    <!-- Categories（多選） -->
    <h3 class="set-overline">Categories</h3>
    <div class="chips" id="afCats">
      <button class="chip" data-cat="Taste">🍽️ <span>Taste</span></button>
      <button class="chip" data-cat="Nature">🏖️ <span>Nature</span></button>
      <button class="chip" data-cat="Culture">🏛️ <span>Culture</span></button>
      <button class="chip" data-cat="Stay">🏠 <span>Stay</span></button>
      <button class="chip" data-cat="Local">🛍️ <span>Local</span></button>
      <button class="chip" data-cat="Experience">💡 <span>Experience</span></button>
    </div>

    <!-- Themes（多選） -->
    <h3 class="set-overline">Themes</h3>
    <div class="chips" id="afThemes">
      <button class="chip" data-theme="Market">Market</button>
      <button class="chip" data-theme="Heritage">Heritage</button>
      <button class="chip" data-theme="Sunset">Sunset</button>
      <button class="chip" data-theme="Family">Family</button>
      <button class="chip" data-theme="Instagram">Instagram</button>
    </div>

    <!-- Attributes（多選） -->
    <h3 class="set-overline">Attributes</h3>
    <div class="chips" id="afAttrs">
      <button class="chip" data-attr="Halal">Halal</button>
      <button class="chip" data-attr="Vegan">Vegan</button>
      <button class="chip" data-attr="Pet-friendly">Pet-friendly</button>
      <button class="chip" data-attr="Wheelchair">Wheelchair</button>
      <button class="chip" data-attr="Parking">Parking</button>
      <button class="chip" data-attr="Wi-Fi">Wi-Fi</button>
    </div>

    <!-- 開放中 / 評分 / 價位 / 排序 -->
    <h3 class="set-overline">More</h3>
    <div class="chips" id="afMore">
      <button class="chip" data-open="true">🟢 Open now</button>
      <button class="chip" data-rating="4.5">⭐ 4.5+</button>
      <button class="chip" data-rating="4.0">⭐ 4.0+</button>
      <button class="chip" data-price="1">$</button>
      <button class="chip" data-price="2">$$</button>
      <button class="chip" data-price="3">$$$</button>
      <button class="chip" data-price="4">$$$$</button>
    </div>

    <h3 class="set-overline">Sort</h3>
    <div class="chips" id="afSort">
      <button class="chip" data-sort="latest">Latest</button>
      <button class="chip" data-sort="hot">Hot</button>
      <button class="chip" data-sort="rating">Rating</button>
    </div>

    <div class="filter-footer">
  <button class="chip" id="btnAdvReset">Reset</button>
  <button class="chip chip--primary" id="btnAdvApply">Apply</button>
</div>
  </div>
</section>

<!-- ===================== Detail Page ===================== -->
<section data-page="detail" class="detail" hidden aria-labelledby="detailName">
  <!-- Sticky AppBar -->
  <header class="d-appbar">
    <button id="btnDetailBack" class="icon-btn" aria-label="Back">←</button>
    <h1 class="d-title" id="detailName">Loading…</h1>
    <div class="d-actions">
      <button id="actShare" class="icon-btn" title="Share" aria-label="Share">🔗</button>
      <button id="btnFav" class="icon-btn" title="Favorite" aria-label="Favorite">♡</button>
    </div>
  </header>

  <!-- Scroll area -->
  <div class="d-scroll">
    <!-- Hero Gallery（目前單張，之後可擴充多張橫滑） -->
    <section class="d-hero">
      <!-- 走馬燈軌道 -->
  <div class="c-wrap">
    <button id="cPrev" class="c-arrow" aria-label="Previous" hidden>‹</button>
    <div id="detailCarousel" class="c-track" aria-roledescription="carousel"></div>
    <button id="cNext" class="c-arrow" aria-label="Next" hidden>›</button>
    <div id="cDots" class="c-dots" hidden></div>
  </div>
    </section>
    
    <!-- 圖片下方的即時資訊徽章：★ / Open now / $$ -->
<div id="detailMeta" class="d-meta-inline"></div>

<!-- 標籤列（不是卡片，純一行或多行換行的 chip/文字） -->
<div id="detailTags" class="d-tags-inline"></div>

    <!-- Quick actions -->
<nav class="d-quick">
  <a id="actPhone"   aria-disabled="true"><i>📞</i><span>Call</span></a>
  <a id="actWhatsApp" aria-disabled="true"><i>💬</i><span>WhatsApp</span></a>
  <a id="actWeb"     aria-disabled="true"><i>🌐</i><span>Website</span></a>
  <a id="actMap"     aria-disabled="true"><i>🗺️</i><span>Map</span></a>
</nav>

    <!-- About -->
    <section class="d-card">
      <h2 class="d-h2">About</h2>
      <p id="detailDesc" class="d-desc">—</p>
    </section>
    
    <section class="d-card" id="addressCard">
  <div class="d-head-row">
    <h2 class="d-h2">Address</h2>
    <button id="btnCopyAddr" class="chip" type="button">Copy</button>
  </div>
  <p id="detailAddressText" class="d-address">—</p>
</section>

    <!-- Hours（Weekly table，可選） -->
<section class="d-card" id="hoursCard">
  <details id="hoursToggle" class="oh">
    <summary class="oh-summary">
      <h2 class="d-h2">Hours</h2>
      <div class="oh-right">
        <span id="detailOpenChip" class="chip">—</span>
        <span id="todayHours" class="oh-today">—</span>
        <span class="oh-caret" aria-hidden="true">⌄</span>
      </div>
    </summary>
    <div id="detailHoursList" class="oh-list">
      <!-- JS 注入 Mon–Sun -->
    </div>
  </details>
</section>


    <!-- Hours / Meta -->
    <section class="d-card d-meta">
      <div class="d-meta-col">
        <div class="d-kv">
          <div class="k">Status</div>
          <div id="detailOpen" class="v">—</div>
        </div>
        <div class="d-kv">
          <div class="k">Rating</div>
          <div id="detailRating" class="v">—</div>
        </div>
      </div>
      <div class="d-meta-col">
        <div class="d-kv">
          <div class="k">Price</div>
          <div id="detailPrice" class="v">—</div>
        </div>
      </div>
    </section>

    <!-- Location（可放嵌入地圖；目前留白卡） -->
<section class="d-card" id="mapCard">
  <div class="d-head-row">
    <h2 class="d-h2">Location</h2>
    <a id="actMap2" class="link-inline" aria-label="Open in Maps">Open in Maps</a>
  </div>
  <div class="d-mapbox" aria-hidden="true">
    <div class="d-mapph">Map preview</div>
  </div>
</section>

    <!-- Related -->
    <section class="d-card">
      <h2 class="d-h2">You may also like</h2>
      <div id="detailRecList" class="d-related">
        <!-- JS 注入 -->
      </div>
    </section>

    <div class="d-safe"></div>
  </div>
</section>


    <!-- Map 
    <section data-page="map" aria-labelledby="h-map" class="section" hidden>
      <h1 id="h-map" data-focusable-heading>Map</h1>
      <p>地圖容器（此頁可維持自身狀態）。</p>
      <div class="card">地圖 placeholder</div>
    </section>-->

    <!-- Profile -->
<section data-page="profile" aria-labelledby="h-profile" class="section" hidden>
  <!-- 頂部標題列（保持你原本的） -->
  <h1 id="h-profile" data-focusable-heading>My HeriLand</h1>

  <!-- 頭像卡 -->
  <header class="profile-header p-card p-user">
    <div class="p-user__avatar" id="profileCardAvatar">H</div>
    <div class="p-user__meta">
      <h2 class="p-user__name" id="profileCardName">Guest User</h2>
      <p class="p-user__tag" id="profileCardTagline">Discovering Sarawak</p>
    </div>
    <!-- 卡片裡的齒輪：直接開 settings drawer -->
    <button class="icon-btn gear" id="profileCardSettings" aria-label="Profile settings">⚙︎</button>
  </header>

  <!-- 四格捷徑 -->
  <section class="profile-quick p-card">
    <button class="p-quick" id="pQuickFavs">
      <span class="ico">❤️</span>
      <span class="txt">我的收藏</span>
    </button>
    <button class="p-quick" id="pQuickReviews">
      <span class="ico">📝</span>
      <span class="txt">我的評論</span>
    </button>
    <button class="p-quick" id="pQuickCoupons">
      <span class="ico">🎟️</span>
      <span class="txt">優惠券 / 任務</span>
    </button>
    <button class="p-quick" id="pQuickPost">
      <span class="ico">📷</span>
      <span class="txt">照片投稿</span>
    </button>
  </section>

  <!-- 我的內容 -->
  <section class="p-box">
    <h3 class="p-box__title">我的內容</h3>
    <div class="p-list p-card">
      <button class="p-item" id="pMyFavs">
        <span class="l">我的收藏</span>
        <span class="r">View all</span>
      </button>
      <button class="p-item" id="pMyReviews">
        <span class="l">我的評論</span>
        <span class="r">0 篇</span>
      </button>
      <button class="p-item" id="pMyTrips">
        <span class="l">我的體驗 / 行程</span>
        <span class="r muted">Coming soon</span>
      </button>
    </div>
  </section>

  <!-- 平台互動 -->
  <section class="p-box">
  <h3 class="p-box__title">平台互動</h3>
  <div class="p-list p-card">
    <button class="p-item" id="pPhotoSubmit">
      <span class="l">照片 / 景點投稿</span>
      <span class="r">Add now</span>
    </button>
    <button class="p-item" id="pFeedback">
      <span class="l">意見回饋</span>
      <span class="r muted">Tell us</span>
    </button>
    <button class="p-item" id="pContact">
      <span class="l">聯繫客服</span>
      <span class="r muted">Support</span>
    </button>
    <button class="p-item" id="pForMerchant">
      <span class="l">我要合作 / 成為商家</span>
      <span class="r">Join</span>
    </button>
  </div>
</section>

  <!-- 關於 / 評分 / 條款：一張 4 格卡，像你截的 Trip 那樣 -->
  <section class="p-box">
    <div class="p-gridcard p-card">
      <button class="p-gitem" id="pAboutHL">
        <span class="g-ico">ℹ️</span>
        <span class="g-t">關於 HeriLand</span>
      </button>
      <button class="p-gitem" id="pRateHL">
        <span class="g-ico">⭐</span>
        <span class="g-t">覺得好用嗎？</span>
      </button>
      <button class="p-gitem" id="pTerms">
        <span class="g-ico">📄</span>
        <span class="g-t">條款 / 隱私</span>
      </button>
      <button class="p-gitem" id="plOpenSettings">
        <span class="g-ico">⚙️</span>
        <span class="g-t">開啟設定</span>
      </button>
    </div>
  </section>

  <!-- 登出 -->
  <section class="p-box">
    <button class="p-logout" id="pLogout">登出帳號</button>
  </section>
</section>

<!-- Saved -->
<section data-page="saved" aria-labelledby="h-saved" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnSavedBack" aria-label="Back">←</button>
    <h1 id="h-saved">我的收藏</h1>
  </header>

  <div class="saved-body">
    <p class="saved-empty" id="savedEmpty">目前沒有收藏任何內容。</p>
    <div class="saved-grid" id="savedGrid"></div>
  </div>
</section>

<!-- Photo Submit -->
<section data-page="photo-submit" aria-labelledby="h-photo" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnPhotoBack" aria-label="Back">←</button>
    <h1 id="h-photo">照片 / 景點投稿</h1>
  </header>

  <div class="photo-body">
    <form id="photoForm" class="photo-form">
      <div class="form-field">
        <label for="photoTitle">標題 *</label>
        <input type="text" id="photoTitle" name="title" placeholder="請輸入景點或照片標題" required>
      </div>

      <div class="form-field">
        <label for="photoDesc">描述</label>
        <textarea id="photoDesc" name="desc" rows="4" placeholder="可以簡單介紹一下照片或景點特色"></textarea>
      </div>

      <div class="form-field">
        <label for="photoCity">地點</label>
        <input type="text" id="photoCity" name="city" placeholder="如：Kuching / Sibu / Miri">
      </div>

      <div class="form-field upload">
        <label>上傳照片</label>
        <input type="file" id="photoFile" accept="image/*">
        <div class="preview" id="photoPreview">
          <p>尚未選擇圖片</p>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn primary">送出投稿</button>
      </div>
    </form>
  </div>
</section>

<!-- My Experiences / 我的體驗 -->
<section data-page="my-experiences" id="p-my-experiences" class="section" hidden aria-labelledby="h-my-exp">
  <header class="subappbar">
    <button class="icon-btn back" data-back-to="profile" aria-label="Back">←</button>
    <h1 id="h-my-exp">我的體驗</h1>
  </header>

  <div class="myexp-body" id="myExpBody">
    <!-- JS 會塞內容進來 -->
  </div>

  <div class="empty-state" id="myExpEmpty" hidden>
    <div class="empty-emoji">🗓️</div>
    <div class="empty-title">還沒有加入體驗</div>
    <div class="empty-sub">到「體驗行程」頁點「＋」就會出現在這裡。</div>
    <button class="err-retry" type="button" id="myExpGoExp">去看體驗</button>
  </div>
</section>

<!-- Feedback -->
<section data-page="feedback" aria-labelledby="h-feedback" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnFeedbackBack" aria-label="Back">←</button>
    <h1 id="h-feedback">意見回饋</h1>
  </header>

  <div class="fb-body">
    <form id="feedbackForm" class="fb-form">
      <!-- 分類 -->
      <div class="form-field">
        <label for="fbType">回饋類型</label>
        <select id="fbType" name="type">
          <option value="bug">功能有問題 / BUG</option>
          <option value="content">內容錯誤 / 店家資料有誤</option>
          <option value="suggest">功能建議</option>
          <option value="other">其他</option>
        </select>
      </div>

      <!-- 主旨 -->
      <div class="form-field">
        <label for="fbTitle">主旨 *</label>
        <input type="text" id="fbTitle" name="title" placeholder="簡單說一下你要反映的內容" required>
      </div>

      <!-- 內容 -->
      <div class="form-field">
        <label for="fbContent">說明 *</label>
        <textarea id="fbContent" name="content" rows="4" placeholder="請盡量說明情況，例如在哪一頁、做了什麼操作、看到什麼錯誤" required></textarea>
      </div>

      <!-- 聯絡方式（選填） -->
      <div class="form-field">
        <label for="fbContact">聯絡方式（選填）</label>
        <input type="text" id="fbContact" name="contact" placeholder="Email / Line / WhatsApp">
      </div>

      <!-- 是否要回覆 -->
      <div class="form-field form-inline">
        <label>
          <input type="checkbox" id="fbNeedReply">
          我希望收到回覆
        </label>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn primary">送出回饋</button>
      </div>
    </form>
  </div>
</section>

<!-- Contact Support -->
<section data-page="contact" aria-labelledby="h-contact" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnContactBack" aria-label="Back">←</button>
    <h1 id="h-contact">聯繫客服</h1>
  </header>

  <div class="contact-body">
    <div class="contact-card p-card">
      <p class="intro">需要協助嗎？你可以透過以下方式直接與 HeriLand 團隊聯繫：</p>

      <div class="contact-links">
        <button class="c-link" data-link="mailto:support@heriland.app">
          📧 <span>Email：support@heriland.app</span>
        </button>
        <button class="c-link" data-link="https://wa.me/60123456789">
          💬 <span>WhatsApp：+60 12-345 6789</span>
        </button>
        <button class="c-link" data-link="https://www.instagram.com/heriland.app/">
          📸 <span>Instagram：@heriland.app</span>
        </button>
      </div>
    </div>

    <form id="contactForm" class="contact-form p-card">
      <h3>或留言給我們：</h3>
      <div class="form-field">
        <label for="ctName">姓名</label>
        <input type="text" id="ctName" placeholder="可留空">
      </div>
      <div class="form-field">
        <label for="ctMsg">訊息內容 *</label>
        <textarea id="ctMsg" rows="4" placeholder="請輸入要聯繫的內容..." required></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn primary">送出訊息</button>
      </div>
    </form>
  </div>
</section>

<!-- My Reviews -->
<section data-page="reviews" aria-labelledby="h-reviews" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnReviewsBack" aria-label="Back">←</button>
    <h1 id="h-reviews">我的評論</h1>
  </header>

  <div class="reviews-body" id="reviewsBody">
    <!-- 有評論 -->
    <div class="review-card">
      <div class="r-top">
        <h3 class="r-title">Kuching Coffee House</h3>
        <span class="r-date">2025/10/30</span>
      </div>
      <div class="r-stars">⭐⭐⭐⭐☆</div>
      <p class="r-content">環境很舒服，咖啡不錯喝，下次還會再來～</p>
    </div>

    <!-- 範例第二筆 -->
    <div class="review-card">
      <div class="r-top">
        <h3 class="r-title">Sibu Heritage Market</h3>
        <span class="r-date">2025/10/20</span>
      </div>
      <div class="r-stars">⭐⭐⭐☆☆</div>
      <p class="r-content">整體還行，但希望標示更清楚。</p>
    </div>

    <!-- 空狀態（沒有任何評論時顯示） -->
    <div class="reviews-empty" hidden>
      <p>你還沒有留下任何評論。</p>
      <button class="btn primary" id="btnGoExplore">去探索看看</button>
    </div>
  </div>
</section>

<!-- For Merchant / Join Partner -->
<section data-page="merchant" aria-labelledby="h-merchant" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnMerchantBack" aria-label="Back">←</button>
    <h1 id="h-merchant">我要合作 / 成為商家</h1>
  </header>

  <div class="merchant-body">
    <div class="m-card p-card">
      <h2>加入 HeriLand 商家夥伴</h2>
      <p>
        歡迎成為 HeriLand 在地夥伴！<br>
        如果你是旅遊景點、餐飲店、民宿、文創品牌或活動單位，
        我們誠摯邀請你一起推廣砂拉越的精彩生活。
      </p>
      <ul class="m-points">
        <li>免費上架店家資料與照片</li>
        <li>曝光於旅遊導覽與城市探索頁</li>
        <li>支援優惠券、活動任務推廣</li>
        <li>合作品牌專屬後台（即將開放）</li>
      </ul>
    </div>

    <div class="m-contact p-card">
      <h3>聯繫我們</h3>
      <p>請選擇以下任一方式與我們聯繫：</p>
      <div class="m-links">
        <button class="m-link" data-link="mailto:partner@heriland.app">
          📧 <span>Email：partner@heriland.app</span>
        </button>
        <button class="m-link" data-link="https://wa.me/60123456789">
          💬 <span>WhatsApp：+60 12-345 6789</span>
        </button>
      </div>
    </div>

    <form id="merchantForm" class="m-form p-card">
      <h3>提交合作申請</h3>
      <div class="form-field">
        <label for="mName">商家名稱 *</label>
        <input type="text" id="mName" required placeholder="例如：Borneo Café / Miri Stay">
      </div>
      <div class="form-field">
        <label for="mType">類型 *</label>
        <select id="mType" required>
          <option value="">請選擇</option>
          <option value="restaurant">餐飲</option>
          <option value="stay">住宿</option>
          <option value="attraction">景點</option>
          <option value="shop">商店</option>
          <option value="event">活動 / 其他</option>
        </select>
      </div>
      <div class="form-field">
        <label for="mContact">聯絡方式 *</label>
        <input type="text" id="mContact" required placeholder="電話 / Email / WhatsApp">
      </div>
      <div class="form-field">
        <label for="mNote">其他說明</label>
        <textarea id="mNote" rows="3" placeholder="想補充的合作想法或簡介"></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn primary">送出申請</button>
      </div>
    </form>
  </div>
</section>

<!-- About HeriLand -->
<section data-page="about" aria-labelledby="h-about" class="section" hidden>
  <header class="page-head">
    <button class="icon-btn back" id="btnAboutBack" aria-label="Back">←</button>
    <h1 id="h-about">關於 HeriLand</h1>
  </header>

  <article class="about-body">
    <div class="about-hero">
      <img src="img/about-hero.jpg" alt="HeriLand illustration" class="about-img">
    </div>

    <div class="about-content p-card">
      <h2>探索砂拉越，從 HeriLand 開始</h2>
      <p>
        HeriLand 是一個結合「旅遊探索」與「在地商家」的行動平台，
        致力於讓更多人發現砂拉越的真實風景與生活文化。
        我們相信，每一座城市、每一間店，都有自己的故事。
      </p>
      <p>
        無論你是旅人、創作者、還是店家夥伴，
        HeriLand 都希望成為你探索與分享的橋樑。
      </p>
    </div>

    <div class="about-content p-card">
      <h3>我們的使命</h3>
      <ul class="about-list">
        <li>推動砂拉越本地文化與創意產業</li>
        <li>建立旅人與商家間的真實連結</li>
        <li>讓科技服務更貼近人與地方的溫度</li>
      </ul>
    </div>

    <div class="about-footer p-card">
      <h3>聯絡我們</h3>
      <p>
        官方網站：<a href="https://heriland.app" target="_blank">heriland.app</a><br>
        聯絡信箱：<a href="mailto:hello@heriland.app">hello@heriland.app</a><br>
        Instagram：<a href="https://instagram.com/heriland.app" target="_blank">@heriland.app</a>
      </p>
      <p class="ver">App 版本 v0.9.0 Demo</p>
    </div>
  </article>
</section>

    <!-- ===================== Add (Create Merchant) ===================== -->
<section data-page="add" class="add" hidden aria-labelledby="h-add">
  <h1 id="h-add" data-focusable-heading>Add a place</h1>

  <form id="addForm" novalidate>
    <!-- 基本資料 -->
    <div class="card">
      <div class="card-hd">Basic</div>
      <div class="grid">
        <label class="fld">
          <span class="k">Name <b>*</b></span>
          <input id="fName" name="name" type="text" placeholder="Brilliant Creative Florist" required maxlength="80" />
          <small class="err" data-err-for="name"></small>
        </label>

        <label class="fld">
          <span class="k">City <b>*</b></span>
          <select id="fCity" name="city_id" required></select>
          <small class="err" data-err-for="city_id"></small>
        </label>

        <label class="fld">
          <span class="k">Category <b>*</b></span>
          <div id="catChips" class="chips-line">
            <button type="button" class="chip" data-cat="Taste">🍽️ Taste</button>
            <button type="button" class="chip" data-cat="Nature">🏖️ Nature</button>
            <button type="button" class="chip" data-cat="Culture">🏛️ Culture</button>
            <button type="button" class="chip" data-cat="Stay">🏠 Stay</button>
            <button type="button" class="chip" data-cat="Local">🛍️ Local</button>
            <button type="button" class="chip" data-cat="Experience">💡 Experience</button>
          </div>
          <input id="fCategory" name="category" type="hidden" required />
          <small class="err" data-err-for="category"></small>
        </label>

        <label class="fld">
          <span class="k">Tags</span>
          <div id="tagBox" class="tagbox" aria-label="Tags input">
            <input id="fTagInput" type="text" placeholder="Type and press Enter…" />
          </div>
          <input id="fTags" name="tags" type="hidden" />
        </label>

        <label class="fld span-2">
          <span class="k">Description</span>
          <textarea id="fDesc" name="description" rows="4" placeholder="Short description (10–600 chars)"></textarea>
        </label>
      </div>
    </div>

    <!-- 地址與聯絡 -->
    <div class="grid">
  <label class="fld span-2">
    <span class="k">Address <b>*</b></span>
    <input id="fAddress" name="address" type="text" placeholder="No. 2, Jalan Lanang, Sibu, Sarawak" required />
    <small class="err" data-err-for="address"></small>
  </label>
  <label class="fld">
    <span class="k">Phone</span>
    <input id="fPhone" name="phone" type="tel" placeholder="+60 84-xxxxx" />
  </label>
  <label class="fld">
    <span class="k">WhatsApp</span>
    <input id="fWhatsApp" name="whatsapp" type="tel" placeholder="+60 12-3456789" />
  </label>
  <label class="fld">
    <span class="k">Website</span>
    <input id="fWebsite" name="website" type="url" placeholder="https://example.com" />
  </label>
</div>

    <!-- 營業時間（週別、Google 風格） -->
<div class="card">
  <div class="card-hd">Opening hours</div>

  <!-- 快速套用 -->
  <div class="oh-toolbar">
    <button type="button" class="btn ghost" id="btnOH247">24/7</button>
    <button type="button" class="btn ghost" id="btnOHWeekday">Mon–Fri</button>
    <button type="button" class="btn ghost" id="btnOHWeekend">Sat–Sun</button>
    <button type="button" class="btn ghost" id="btnOHClear">Clear all</button>
  </div>

  <!-- 編輯器 -->
  <div id="ohTable" class="oh-table" role="group" aria-label="Opening hours editor">
    <!-- 7 天固定列（JS 會幫每列插入時間範圍 chip 與刪除鈕） -->
    <div class="oh-row" data-day="mon">
      <div class="oh-day">Mon</div>
      <select class="oh-mode" aria-label="Mon mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Mon note">
    </div>
    <div class="oh-row" data-day="tue">
      <div class="oh-day">Tue</div>
      <select class="oh-mode" aria-label="Tue mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Tue note">
    </div>
    <div class="oh-row" data-day="wed">
      <div class="oh-day">Wed</div>
      <select class="oh-mode" aria-label="Wed mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Wed note">
    </div>
    <div class="oh-row" data-day="thu">
      <div class="oh-day">Thu</div>
      <select class="oh-mode" aria-label="Thu mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Thu note">
    </div>
    <div class="oh-row" data-day="fri">
      <div class="oh-day">Fri</div>
      <select class="oh-mode" aria-label="Fri mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Fri note">
    </div>
    <div class="oh-row" data-day="sat">
      <div class="oh-day">Sat</div>
      <select class="oh-mode" aria-label="Sat mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Sat note">
    </div>
    <div class="oh-row" data-day="sun">
      <div class="oh-day">Sun</div>
      <select class="oh-mode" aria-label="Sun mode">
        <option value="open">Open</option>
        <option value="24h">24H</option>
        <option value="closed">Closed</option>
        <option value="special">Special</option>
      </select>
      <div class="oh-ranges"></div>
      <input class="oh-note" type="text" placeholder="Note (optional)" aria-label="Sun note">
    </div>
  </div>

  <!-- 存進表單（送出時會塞 JSON 字串） -->
  <input id="fOpenDays" name="open_days" type="hidden" />
</div>

    <!-- 圖片（可拍照/多張/排序） -->
    <div class="card">
      <div class="card-hd">Photos</div>
      <div class="photos-bar">
        <input id="fPhotos" type="file" accept="image/*" capture="environment" multiple hidden />
        <button type="button" class="btn" id="btnPickPhotos">Add photos</button>
        <span class="muted">Up to 10. First one is the cover.</span>
      </div>
      <div id="photoGrid" class="photo-grid" aria-live="polite"></div>
    </div>

    <!-- 社群 -->
    <div class="card">
      <div class="card-hd">Social</div>
      <div class="grid">
        <label class="fld">
          <span class="k">Instagram</span>
          <input id="fIG" name="ig" type="url" placeholder="https://instagram.com/yourpage" />
        </label>
        <label class="fld">
          <span class="k">Facebook</span>
          <input id="fFB" name="fb" type="url" placeholder="https://facebook.com/yourpage" />
        </label>
        <label class="fld">
          <span class="k">TikTok</span>
          <input id="fTT" name="tiktok" type="url" placeholder="https://tiktok.com/@yourpage" />
        </label>
        <label class="fld">
          <span class="k">YouTube</span>
          <input id="fYT" name="youtube" type="url" placeholder="https://youtube.com/@yourpage" />
        </label>
      </div>
    </div>

    <!-- 送出 -->
    <div class="form-actions">
      <button type="button" class="btn ghost" id="btnSaveDraft">Save draft</button>
      <button type="submit" class="btn primary" id="btnSubmit">Publish</button>
    </div>

    <div id="addToast" class="toast" role="status" aria-live="polite" hidden></div>
  </form>
</section>

    
<!-- HeriLand Settings Drawer (new, embedded) -->
<div id="hlSettingsDrawer" class="hl-set" aria-hidden="true">
  <!-- backdrop -->
  <div class="hl-set__backdrop" data-hl-set-close></div>

  <!-- panel -->
  <div class="hl-set__panel" role="dialog" aria-modal="true" aria-labelledby="hlSetTitle" tabindex="-1">
    <!-- A. User Header -->
    <header class="hl-set__head">
      <div class="hl-set__user">
        <div class="hl-set__avatar" aria-hidden="true">H</div>
        <div class="hl-set__meta">
          <div class="hl-set__name" id="hlSetUserName">Guest User</div>
          <div class="hl-set__sub" id="hlSetUserRole">Discovering Sarawak</div>
        </div>
      </div>
      <button type="button" class="hl-set__edit" id="hlSetEditProfile">Edit</button>
    </header>

        <div class="hl-set__body" tabindex="-1">
      <!-- B. My stuff -->
      <section class="hl-set__section" aria-label="My stuff">
        <h2 class="hl-set__overline">My stuff</h2>
        <div class="hl-set__card">
          <button class="hl-set__item" id="hlGoFavorites">
            <span class="l">My favorites</span>
            <span class="v" id="hlFavCount">12 places</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlGoReviews">
            <span class="l">My reviews</span>
            <span class="v">0 written</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlGoTrips">
            <span class="l">My trips / experiences</span>
            <span class="v muted">Coming soon</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlGoCoupons">
            <span class="l">Coupons / Missions</span>
            <span class="v muted">No coupons</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlReportPlace">
            <span class="l">Report a place</span>
            <span class="v muted">Wrong hours, closed, move…</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlFeedback">
            <span class="l">Feedback to HeriLand</span>
            <span class="v muted">Tell us what to improve</span>
            <span class="c">›</span>
          </button>
        </div>
      </section>

      <!-- C. Preferences -->
      <section class="hl-set__section" aria-label="Preferences">
        <h2 class="hl-set__overline">Preferences</h2>
        <div class="hl-set__card">
          <button class="hl-set__item" data-hl-set-open="lang">
            <span class="l">Language</span>
            <span class="v" id="hlSetLangVal">English</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" data-hl-set-open="currency">
            <span class="l">Currency</span>
            <span class="v" id="hlSetCurVal">MYR</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" data-hl-set-open="theme">
            <span class="l">Theme</span>
            <span class="v" id="hlSetThemeVal">System</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" data-hl-set-open="city">
            <span class="l">Preferred city</span>
            <span class="v" id="hlSetCityVal">Kuching</span>
            <span class="c">›</span>
          </button>
          <div class="hl-set__item">
            <span class="l">Notifications</span>
            <label class="hl-switch">
              <input type="checkbox" id="hlSetNotif">
              <i></i>
            </label>
          </div>
          <div class="hl-set__item">
            <span class="l">Offline mode</span>
            <label class="hl-switch">
              <input type="checkbox" id="hlSetOffline">
              <i></i>
            </label>
          </div>
          <button class="hl-set__item" id="hlOfflineClear">
            <span class="l">Clear offline cache</span>
            <span class="v muted">Free up space</span>
            <span class="c">›</span>
          </button>
        </div>
      </section>

      <!-- D. Platform -->
      <section class="hl-set__section" aria-label="Platform">
        <h2 class="hl-set__overline">Platform</h2>
        <div class="hl-set__card">
          <button class="hl-set__item" id="hlAbout">
            <span class="l">About HeriLand</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlForMerchant">
            <span class="l">For merchants / submit a place</span>
            <span class="v muted">We help you list it</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlTerms">
            <span class="l">Terms & Privacy</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlSupport">
            <span class="l">Contact / WhatsApp us</span>
            <span class="v muted">Partner / media / demo</span>
            <span class="c">›</span>
          </button>
        </div>
      </section>

      <!-- E. Account -->
      <section class="hl-set__section" aria-label="Account">
        <h2 class="hl-set__overline">Account</h2>
        <div class="hl-set__card">
          <button class="hl-set__item" id="hlRoleSwitch">
            <span class="l">Role</span>
            <span class="v" id="hlSetRoleVal">Guest</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item danger" id="hlSignInOut">
            <span class="l" id="hlSignInOutTxt">Sign in / Create account</span>
          </button>
        </div>
      </section>

      <!-- F. Developer Tools -->
      <section class="hl-set__section" aria-label="Developer tools">
        <h2 class="hl-set__overline">Developer tools</h2>
        <div class="hl-set__card">
          <button class="hl-set__item" id="hlDevToggleMock">
            <span class="l">Use mock data</span>
            <span class="v muted" id="hlDevMockState">off</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlDevForceCity">
            <span class="l">Force city for home/explore</span>
            <span class="v muted" id="hlDevForceCityVal">auto</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlDevResetHome">
            <span class="l">Re-seed home demo data</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item" id="hlDevDump">
            <span class="l">Show current localStorage</span>
            <span class="c">›</span>
          </button>
          <button class="hl-set__item danger" id="hlDevClearAll">
            <span class="l">Clear all HeriLand storage</span>
          </button>
        </div>
      </section>

      <div class="hl-set__footnote">
        HeriLand v1.0.0 • Sarawak build
      </div>
    </div>
    
    <!-- Sub-sheets (for language / currency / theme / city / terms etc.) -->
    <div class="hl-sub" id="hlSub-lang" aria-hidden="true">
      <header class="hl-sub__head">
        <button type="button" class="hl-sub__back" data-hl-sub-close>←</button>
        <h3>Language</h3>
      </header>
      <div class="hl-sub__body">
        <button class="hl-sub__opt" data-val="English">English</button>
        <button class="hl-sub__opt" data-val="繁體中文">繁體中文</button>
        <button class="hl-sub__opt" data-val="Bahasa Melayu">Bahasa Melayu</button>
      </div>
    </div>

    <div class="hl-sub" id="hlSub-currency" aria-hidden="true">
      <header class="hl-sub__head">
        <button type="button" class="hl-sub__back" data-hl-sub-close>←</button>
        <h3>Currency</h3>
      </header>
      <div class="hl-sub__body">
        <button class="hl-sub__opt" data-val="MYR">MYR</button>
        <button class="hl-sub__opt" data-val="USD">USD</button>
        <button class="hl-sub__opt" data-val="SGD">SGD</button>
        <button class="hl-sub__opt" data-val="TWD">TWD</button>
      </div>
    </div>

    <div class="hl-sub" id="hlSub-theme" aria-hidden="true">
      <header class="hl-sub__head">
        <button type="button" class="hl-sub__back" data-hl-sub-close>←</button>
        <h3>Theme</h3>
      </header>
      <div class="hl-sub__body">
        <button class="hl-sub__opt" data-val="system">System</button>
        <button class="hl-sub__opt" data-val="light">Light</button>
        <button class="hl-sub__opt" data-val="dark">Dark</button>
      </div>
    </div>

    <div class="hl-sub" id="hlSub-city" aria-hidden="true">
      <header class="hl-sub__head">
        <button type="button" class="hl-sub__back" data-hl-sub-close>←</button>
        <h3>Preferred city</h3>
      </header>
      <div class="hl-sub__body">
        <button class="hl-sub__opt" data-val="auto">Auto (by location)</button>
        <button class="hl-sub__opt" data-val="Kuching">Kuching</button>
        <button class="hl-sub__opt" data-val="Sibu">Sibu</button>
        <button class="hl-sub__opt" data-val="Miri">Miri</button>
      </div>
    </div>

    <div class="hl-sub" id="hlSub-forceCity" aria-hidden="true">
      <header class="hl-sub__head">
        <button type="button" class="hl-sub__back" data-hl-sub-close>←</button>
        <h3>Force city for dev</h3>
      </header>
      <div class="hl-sub__body">
        <button class="hl-sub__opt" data-dev-city="auto">auto (no force)</button>
        <button class="hl-sub__opt" data-dev-city="kuching">kuching</button>
        <button class="hl-sub__opt" data-dev-city="sibu">sibu</button>
        <button class="hl-sub__opt" data-dev-city="miri">miri</button>
      </div>
    </div>
  </div>
</div>
    
  </main>

  <!-- ====== Edit Profile（會員資料編輯） ====== -->
<section id="p-edit-profile" class="overlay-page hl-edit" hidden aria-labelledby="h-edit-profile" aria-modal="true" role="dialog">
  <!-- Header -->
  <header class="subappbar hl-edit__head">
    <button class="icon-btn back" id="btnEditProfileBack" aria-label="Back">←</button>
    <h1 id="h-edit-profile" class="settings-title" tabindex="-1">Edit profile</h1>
    <button class="btn small primary" id="btnEditProfileSave">Save</button>
  </header>

  <!-- Body -->
  <div class="hl-edit__body" id="hlEditBody" tabindex="-1">
    <!-- A. avatar + basic -->
    <section class="hl-set__section">
      <div class="hl-edit__card hl-edit__ident">
        <button class="hl-avatar-btn" id="btnChangeAvatar" aria-label="Change avatar">
          <span class="hl-avatar" id="hlEditAvatar">H</span>
          <span class="hl-avatar-edit">Change</span>
        </button>
        <div class="hl-edit__meta">
          <label class="hl-field">
            <span class="k">Display name</span>
            <input type="text" id="hlEditName" value="Guest User" autocomplete="name" />
          </label>
          <label class="hl-field">
            <span class="k">Tagline</span>
            <input type="text" id="hlEditTagline" value="Discovering Sarawak" placeholder="e.g. Love Miri sunsets" />
          </label>
        </div>
      </div>
    </section>

    <!-- B. personal details -->
    <section class="hl-set__section">
      <h2 class="hl-set__overline">Personal details</h2>
      <div class="hl-set__card">
        <button class="hl-set__item" data-ep-open="gender">
          <span class="l">Gender</span>
          <span class="v" id="hlEditGenderVal">Prefer not to say</span>
          <span class="c">›</span>
        </button>
        <button class="hl-set__item" data-ep-open="city">
          <span class="l">Preferred city</span>
          <span class="v" id="hlEditCityVal">Kuching</span>
          <span class="c">›</span>
        </button>
        <button class="hl-set__item" data-ep-open="lang">
          <span class="l">Language</span>
          <span class="v" id="hlEditLangVal">繁體中文</span>
          <span class="c">›</span>
        </button>
      </div>
    </section>

    <!-- C. account & security -->
    <section class="hl-set__section">
      <h2 class="hl-set__overline">Account & security</h2>
      <div class="hl-set__card">
        <div class="hl-set__item">
          <span class="l">Email</span>
          <span class="v" id="hlEditEmailVal">not linked</span>
          <button class="mini-link" id="btnEditEmail">Add</button>
        </div>
        <button class="hl-set__item" id="btnEditPassword">
          <span class="l">Password</span>
          <span class="v muted" id="hlEditPwdVal">Not set</span>
          <span class="c">›</span>
        </button>
      </div>
    </section>

    <!-- D. sign-in methods -->
    <section class="hl-set__section">
      <h2 class="hl-set__overline">Sign-in methods</h2>
      <div class="hl-set__card">
        <div class="hl-set__item">
          <span class="l">Google</span>
          <span class="v muted" id="hlBindGoogleState">Not connected</span>
          <button class="mini-link" id="btnBindGoogle">Connect</button>
        </div>
        <div class="hl-set__item">
          <span class="l">Apple</span>
          <span class="v muted" id="hlBindAppleState">Not connected</span>
          <button class="mini-link" id="btnBindApple">Connect</button>
        </div>
        <div class="hl-set__item">
          <span class="l">Facebook</span>
          <span class="v muted" id="hlBindFBState">Not connected</span>
          <button class="mini-link" id="btnBindFB">Connect</button>
        </div>
      </div>
    </section>

    <!-- E. danger -->
    <section class="hl-set__section">
      <h2 class="hl-set__overline">Danger zone</h2>
      <div class="hl-set__card">
        <button class="hl-set__item danger" id="btnEPLogoutAll">
          <span class="l">Sign out all devices</span>
        </button>
        <button class="hl-set__item danger" id="btnEPDelete">
          <span class="l">Delete account</span>
        </button>
      </div>
    </section>

    <div class="hl-set__footnote">
      Changes here affect how people see you in HeriLand.
    </div>
  </div>

  <!-- ===== Sub drawers (small bottom sheets) ===== -->
  <!-- gender -->
  <div class="hl-subsheet" id="ep-gender" hidden>
    <header class="hl-subsheet__head">
      <button class="icon-btn back hl-subsheet__close" aria-label="Close">←</button>
      <h2 class="hl-subsheet__title">Gender</h2>
    </header>
    <div class="hl-subsheet__body">
      <button class="option" data-gender="Male">Male</button>
      <button class="option" data-gender="Female">Female</button>
      <button class="option" data-gender="Prefer not to say">Prefer not to say</button>
    </div>
  </div>

  <!-- password -->
  <div class="hl-subsheet" id="ep-password" hidden>
    <header class="hl-subsheet__head">
      <button class="icon-btn back hl-subsheet__close" aria-label="Close">←</button>
      <h2 class="hl-subsheet__title">Set / change password</h2>
    </header>
    <div class="hl-subsheet__body">
      <label class="hl-field">
        <span class="k">Current password</span>
        <input type="password" id="epPwdCurrent" autocomplete="current-password" />
      </label>
      <label class="hl-field">
        <span class="k">New password</span>
        <input type="password" id="epPwdNew" autocomplete="new-password" />
      </label>
      <label class="hl-field">
        <span class="k">Confirm password</span>
        <input type="password" id="epPwdConfirm" autocomplete="new-password" />
      </label>
      <button class="btn primary wfull" id="btnEPConfirmPwd">Update password</button>
    </div>
  </div>
</section>
  
  <!-- Search Overlay (fullscreen) -->
<div id="searchOverlay" class="search-ovl" role="dialog" aria-modal="true" hidden>
  <div class="search-shell">
    <!-- Top bar -->
    <div class="s-top">
      <button class="s-close" id="sBtnClose" aria-label="Close">✕</button>
      <div class="s-input">
        <i class="s-ico">🔎</i>
        <input id="sQuery" type="search" placeholder="Search cities, experiences, places" enterkeyhint="search" autocomplete="off" />
        <button id="sBtnClear" class="s-clear" aria-label="Clear" hidden>⌫</button>
      </div>
      <!-- 預留語音/掃碼位：可視需要啟用 -->
      <!-- <button class="s-aux" aria-label="Voice">🎤</button> -->
    </div>

    <!-- Content -->
    <div class="s-body" id="sBody" tabindex="-1">
      <!-- Suggestions (when typing) -->
      <div id="sSuggest" class="s-section" hidden>
        <div class="s-title">Suggestions</div>
        <ul id="sSuggestList" class="s-list"></ul>
      </div>

      <!-- Recent -->
      <div id="sRecent" class="s-section">
        <div class="s-title">
          <span>Recent</span>
          <button id="sBtnClearRecent" class="s-mini">Clear all</button>
        </div>
        <div id="sRecentChips" class="chips"></div>
      </div>

      <!-- Hot / Popular -->
      <div id="sHot" class="s-section">
        <div class="s-title">Popular</div>
        <div id="sHotChips" class="chips"></div>
      </div>

      <!-- Quick filters -->
      <div id="sQuick" class="s-section">
        <div class="s-title">Quick filters</div>
        <div class="chips" id="sQuickChips">
          <button class="chip" data-city="kuching">Kuching</button>
          <button class="chip" data-city="sibu">Sibu</button>
          <button class="chip" data-city="miri">Miri</button>
          <button class="chip" data-cat="Experience">Experience</button>
          <button class="chip" data-cat="Local">Local</button>
          <button class="chip" data-cat="Taste">Taste</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Rate App modal -->
<div id="rateAppModal" class="modal-backdrop" hidden>
  <div class="modal-box">
    <img src="img/rate-illustration.png" alt="Rate illustration" class="modal-img">
    <h2>覺得 HeriLand 好用嗎？</h2>
    <p>如果喜歡，給我們一點鼓勵吧 🌟</p>
    <div class="modal-actions">
      <button id="btnRateYes" class="btn-primary">好啊，前往商店</button>
      <button id="btnRateCancel" class="btn-secondary">下次再說</button>
    </div>
  </div>
</div>

<!-- ===== Terms / Privacy Overlay ===== -->
<section data-page="about" id="p-terms" class="overlay-page hl-terms" hidden aria-labelledby="h-terms" aria-modal="true" role="dialog">
  <header class="subappbar hl-terms__head">
    <button class="icon-btn back" id="btnTermsBack" aria-label="返回">←</button>
    <h1 id="h-terms" class="hl-terms__title">使用條款 / 隱私權政策</h1>
  </header>

  <div class="hl-terms__body">
    <article>
      <h2>一、使用條款</h2>
      <p>歡迎使用 HeriLand！使用本應用即表示您同意以下條款。請在使用前詳細閱讀。</p>
      <ul>
        <li>本平台之內容（包括文字、圖片、影片）受版權法保護，未經授權不得轉載。</li>
        <li>使用者須遵守當地法律，不得發表違法或具誤導性的內容。</li>
      </ul>

      <h2>二、隱私政策</h2>
      <p>我們重視您的個人資料安全，以下是我們如何收集與使用資訊：</p>
      <ul>
        <li>僅於必要時收集使用者名稱、聯絡資料與偏好設定。</li>
        <li>所有資料僅用於提升服務體驗，不會販售給第三方。</li>
        <li>您可隨時要求刪除個人資料。</li>
      </ul>

      <h2>三、資料安全</h2>
      <p>我們採用加密與安全機制，確保資料不被未授權存取。</p>
      <p>若有疑問，您可透過「聯繫客服」與我們聯絡。</p>

      <h2>更新條款</h2>
      <p>HeriLand 有權於必要時修訂本條款，最新版本將於應用內公布。</p>
    </article>
  </div>
</section>
  

  <!-- 底部導覽：由 partial 注入 -->
  <div data-include="partials/tabbar.html"></div>
  <include src="partials/search-overlay.html"></include>

  <!-- scripts：先載入 include，再載入 app（確保綁到已注入的 tab） -->
  <script src="js/include.js" defer></script>
  <script type="module" src="js/app.js"></script>
  <script type="module" src="js/tabbar.js"></script>
  <script type="module" src="js/home.js"></script>
  <script type="module" src="js/saved.js"></script>
  <script type="module" src="js/add.js"></script>
  <script type="module" src="js/explore.js"></script>
  <script type="module" src="js/search-overlay.js"></script>
  <script type="module" src="js/settings.js"></script>
  <script type="module" src="js/rate.js"></script>
  <script type="module" src="js/profile.js"></script>
  <script type="module" src="js/router.js"></script>
  <script type="module" src="js/photo-submit.js"></script>
  <script type="module" src="js/feedback.js"></script>
  <script type="module" src="js/contact.js"></script>
  <script type="module" src="js/reviews.js"></script>
  <script type="module" src="js/merchant.js"></script>
  <script type="module" src="js/about.js"></script>
  <script type="module" src="js/terms.js"></script>
  <script type="module" src="js/trips.js"></script>
</body>
</html>
