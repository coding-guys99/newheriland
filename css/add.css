/* =========================================================
   HeriLand — Add Page (Add a place)
   僅以 CSS 美化表單與區塊；不改 JS / HTML 結構
   ========================================================= */

:root {
  --add-bg: #F6F1E6;               /* 奶油底 */
  --add-card: #FFFFFF;             /* 卡片白 */
  --add-line: rgba(0,0,0,.08);
  --add-soft-line: rgba(0,0,0,.06);
  --add-heading: #1F2937;
  --add-text: #374151;
  --add-subtle: #6B7280;
  --add-radius-outer: 16px;        /* 大卡片圓角 */
  --add-radius: 12px;              /* 元件圓角 */
  --add-shadow: 0 12px 40px rgba(0,0,0,.08);
  --add-soft-shadow: 0 6px 20px rgba(0,0,0,.06);
  --brand: #2E5E4E;                /* 主色同 detail */
  --brand-weak: #E7F3EF;           /* 主色淡面 */
  --accent: #2563EB;
  --danger: #B91C1C;
  --good: #166534;
}

/* 整頁背景與安全區 */
[data-page="add"] {
  background: var(--add-bg);
  min-height: 100dvh;
}
[data-page="add"] .page {
  padding: 10px 12px calc(12px + env(safe-area-inset-bottom));
}

/* 頁標題（沿用你現有的 h1） */
[data-page="add"] h1,
[data-page="add"] .title {
  font-size: 26px;
  font-weight: 800;
  color: var(--add-heading);
  letter-spacing: .2px;
  margin: 8px 12px 14px;
}

/* 區塊卡片（Basic / Opening hours / Photos …） */
[data-page="add"] .card,
[data-page="add"] .section {
  background: var(--add-card);
  border: 1px solid var(--add-line);
  border-radius: var(--add-radius-outer);
  box-shadow: var(--add-soft-shadow);
  padding: 14px 12px;
  margin: 0 12px 14px;
}

/* 區塊標題列 */
[data-page="add"] .card > .h,
[data-page="add"] .section > .h,
[data-page="add"] .card > h2,
[data-page="add"] h2.section-title {
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px;
  font-size: 17px;
  font-weight: 800;
  margin: 2px 2px 10px;
  color: var(--add-heading);
}

/* 表單欄位群組（label/控件/說明） */
[data-page="add"] .field { margin: 12px 2px; }
[data-page="add"] .label,
[data-page="add"] label {
  display: inline-flex; align-items: center; gap: 6px;
  font-size: 13px;
  font-weight: 700;
  color: var(--add-subtle);
  margin: 4px 0 6px;
}
[data-page="add"] .label .req { color: var(--danger); }

/* 文字框 / 下拉 / 多行 */
[data-page="add"] input[type="text"],
[data-page="add"] input[type="tel"],
[data-page="add"] input[type="url"],
[data-page="add"] input[type="search"],
[data-page="add"] select,
[data-page="add"] textarea {
  width: 100%;
  border: 1px solid var(--add-soft-line);
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 2px 0 rgba(0,0,0,.02) inset;
  padding: 12px 14px;
  font-size: 16px;
  color: var(--add-text);
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
}
[data-page="add"] textarea { min-height: 110px; resize: vertical; }

/* 聚焦 & 錯誤 */
[data-page="add"] input:focus,
[data-page="add"] select:focus,
[data-page="add"] textarea:focus {
  border-color: color-mix(in oklab, var(--brand) 35%, #0000);
  box-shadow:
    0 0 0 3px color-mix(in oklab, var(--brand) 14%, #0000);
}
[data-page="add"] .is-error input,
[data-page="add"] .is-error select,
[data-page="add"] .is-error textarea {
  border-color: color-mix(in oklab, var(--danger) 55%, #0000);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--danger) 12%, #0000);
}
[data-page="add"] .hint { font-size: 12px; color: var(--add-subtle); margin-top: 6px; }

/* 類別 Chips（Taste / Nature / …） */
[data-page="add"] .chips { display: flex; flex-wrap: wrap; gap: 10px; }
[data-page="add"] .chip {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px dashed var(--add-soft-line);
  background: #fff;
  color: #111;
  font-weight: 700; font-size: 14px;
  transition: transform .05s ease, background .15s ease, border-color .15s ease;
}
[data-page="add"] .chip:active { transform: translateY(1px); }
[data-page="add"] .chip.is-on,
[data-page="add"] .chip[aria-pressed="true"] {
  background: var(--brand-weak);
  border-color: color-mix(in oklab, var(--brand) 30%, #0000);
}

/* 小膠囊按鈕（像「Add range」「Clear all」） */
[data-page="add"] .btn-pill {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 8px 14px 9px;
  border-radius: 999px;
  border: 1px solid var(--add-soft-line);
  background: #fff;
  color: #111; font-weight: 700; font-size: 14px;
}
[data-page="add"] .btn-pill.primary {
  background: var(--brand);
  color: #fff; border-color: transparent;
  box-shadow: 0 6px 18px rgba(46,94,78,.22);
}
[data-page="add"] .btn-pill.ghost { background: #fff; }

/* 區塊內分割線（淡） */
[data-page="add"] .divider {
  height: 1px; background: var(--add-soft-line);
  margin: 12px 0;
}

/* Opening hours 編輯器 */
[data-page="add"] .hours { display: grid; gap: 12px; }
[data-page="add"] .hours-row {
  border: 1px dashed var(--add-soft-line);
  background: #fff;
  border-radius: 14px;
  padding: 10px;
}
[data-page="add"] .hours-top {
  display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 10px;
}
[data-page="add"] .hours-day { font-weight: 800; color: var(--add-heading); }
[data-page="add"] .hours-state select {
  background: #F3F4F6; border: 0; border-radius: 999px; padding: 8px 12px;
}
[data-page="add"] .hours-range {
  display: inline-flex; gap: 8px; align-items: center;
  border: 1px dashed var(--add-soft-line);
  background: #fff; padding: 8px; border-radius: 999px;
}
[data-page="add"] .hours-range input {
  width: 84px; text-align: center;
  border-radius: 10px; border: 1px solid var(--add-soft-line);
  padding: 8px 10px; font-variant-numeric: tabular-nums;
}
[data-page="add"] .hours-add { margin-top: 10px; }

/* Photos 區（不改 JS） */
[data-page="add"] .uploader {
  border: 1px dashed var(--add-soft-line);
  background: linear-gradient(180deg, #fff, #FBFBFB);
  border-radius: 14px;
  padding: 16px;
  text-align: center;
  color: var(--add-subtle);
}
[data-page="add"] .uploader .btn-pill { margin-top: 8px; }

/* 表單尾端操作列 */
[data-page="add"] .form-actions {
  position: sticky; bottom: calc(12px + env(safe-area-inset-bottom));
  display: flex; gap: 10px; justify-content: flex-end;
  padding: 8px 12px;
  background:
    linear-gradient(180deg, rgba(246,241,230,0), var(--add-bg) 40% 100%);
}
[data-page="add"] .btn {
  appearance: none; border: 0; border-radius: 12px;
  padding: 12px 16px; font-weight: 800; font-size: 15px; cursor: pointer;
}
[data-page="add"] .btn.primary {
  background: var(--brand); color: #fff;
  box-shadow: 0 10px 26px rgba(46,94,78,.25);
}
[data-page="add"] .btn.ghost {
  background: #fff; color: var(--add-heading);
  border: 1px solid var(--add-soft-line);
}

/* 讓內容不被 Tabbar 擋住（你的 tabbar 是 overlay） */
[data-page="add"] .page-end-safe {
  height: calc(90px + env(safe-area-inset-bottom));   /* 覆蓋 tabbar 高度 */
}

/* 深色模式 */
@media (prefers-color-scheme: dark) {
  :root {
    --add-bg: #0B0F12;
    --add-card: rgba(16,21,26,.78);
    --add-line: rgba(255,255,255,.06);
    --add-soft-line: rgba(255,255,255,.08);
    --add-heading: #F3F4F6;
    --add-text: #E5E7EB;
    --add-subtle: #9CA3AF;
    --add-shadow: 0 18px 40px rgba(0,0,0,.45);
    --add-soft-shadow: 0 10px 28px rgba(0,0,0,.38);
    --brand-weak: color-mix(in oklab, var(--brand) 24%, #000);
  }
  [data-page="add"] .card,
  [data-page="add"] .section { backdrop-filter: blur(8px); }
  [data-page="add"] input[type="text"],
  [data-page="add"] input[type="tel"],
  [data-page="add"] input[type="url"],
  [data-page="add"] input[type="search"],
  [data-page="add"] select,
  [data-page="add"] textarea {
    background: rgba(255,255,255,.06);
    border-color: var(--add-soft-line);
    color: var(--add-text);
  }
  [data-page="add"] .chip { background: rgba(255,255,255,.06); border-color: var(--add-soft-line); color: #f3f4f6; }
  [data-page="add"] .chip.is-on { background: var(--brand-weak); }
  [data-page="add"] .btn-pill { background: rgba(255,255,255,.08); color: #f3f4f6; }
  [data-page="add"] .btn.ghost { background: rgba(255,255,255,.06); color: #f3f4f6; }
  [data-page="add"] .uploader { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); }
}

/* 平板以上：欄位兩欄排 */
@media (min-width: 720px) {
  [data-page="add"] .grid-2 {
    display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
  }
}