/* =========================================
   Experiences — 兩欄卡 + Featured 全寬
   ========================================= */
:root{
  --xp-radius: 12px;
  --xp-line: rgba(0,0,0,.08);
}

/* 外容器：避免被底部 tabbar 蓋到 */
#xpMain{
  padding: 8px 10px calc(88px + env(safe-area-inset-bottom));
}

/* 篩選列（若有就沿用） */
#xpMain .filters{
  margin: 6px 0 10px;
}

/* 清單：兩欄自適應（手機 2 欄、平板可達 3 欄） */
.xp-list{
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

/* 大卡（全寬 featured） */
.xp-card.featured{
  grid-column: 1 / -1;
}

/* 保護：若 HTML 沒加 .featured，第一張也全寬 */
.xp-list > .xp-card:first-child{
  grid-column: 1 / -1;
}

/* 卡片基礎 */
.xp-card{
  display: flex;
  flex-direction: column;
  border-radius: var(--xp-radius);
  overflow: hidden;
  background: #fff;
  border: 1px solid var(--xp-line);
  box-shadow: 0 8px 22px rgba(0,0,0,.08);
}

/* 封面：featured 與一般卡不同比例 */
.xp-cover{
  background: #e5e7eb center/cover no-repeat;
  aspect-ratio: 4 / 3;               /* 一般卡：視覺更飽滿 */
}
.xp-card.featured .xp-cover,
.xp-list > .xp-card:first-child .xp-cover{
  aspect-ratio: 16 / 9;              /* featured：橫幅 */
}

/* 內文區 */
.xp-body{
  display: grid;
  grid-template-rows: auto 1fr auto; /* 標題 / 簡介 / CTA 或 meta */
  gap: 6px;
  padding: 10px;
}

/* 標題：兩行省略 */
.xp-title{
  margin: 0;
  font-weight: 800;
  font-size: 14px;
  line-height: 1.35;
  color: #111;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* featured 標題略放大 */
.xp-card.featured .xp-title,
.xp-list > .xp-card:first-child .xp-title{
  font-size: 16px;
}

/* 簡介（可選，有就顯示一行） */
.xp-desc{
  font-size: 12px;
  color: #6b7280;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;   /* 一般卡最多兩行 */
  -webkit-box-orient: vertical;
}
.xp-card.featured .xp-desc,
.xp-list > .xp-card:first-child .xp-desc{
  -webkit-line-clamp: 3;   /* featured 最多三行 */
}

/* 底部資訊列：城市/標籤 + CTA */
.xp-foot{
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 2px;
}

/* 小型 meta（城市 / 標籤） */
.xp-meta{
  font-size: 11px;
  color: #64748b;
  display: inline-flex;
  gap: 6px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* CTA 按鈕（僅按此開詳情，避免整卡誤觸） */
.xp-cta{
  margin-left: auto;
  appearance: none;
  border: 1px solid var(--xp-line);
  background: linear-gradient(180deg,#fff,#fafafa);
  border-radius: 999px;
  padding: 6px 10px;
  font-weight: 800;
  font-size: 12px;
  cursor: pointer;
}
.xp-cta:active{ transform: translateY(1px); }

/* 卡片按壓回饋（但不觸發導向） */
.xp-card:active{
  transform: translateY(1px);
  transition: transform .08s ease;
}

/* 玻璃風（可選：給 featured 增加層次） */
.xp-card.featured{
  background: color-mix(in srgb, #ffffff 92%, transparent);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  backdrop-filter: blur(8px) saturate(120%);
}

/* ====== Skeleton（如需） ====== */
.xp-skel{
  height: 160px;
  border-radius: var(--xp-radius);
  background:
    linear-gradient(90deg, rgba(0,0,0,.04), rgba(0,0,0,.08), rgba(0,0,0,.04));
  background-size: 200% 100%;
  animation: xpShimmer 1.1s linear infinite;
  border: 1px solid var(--xp-line);
}
@keyframes xpShimmer{ to { background-position: -200% 0; } }

/* ====== 深色模式 ====== */
@media (prefers-color-scheme: dark){
  .xp-card{
    background: color-mix(in srgb, #0b0f12 78%, transparent);
    border-color: rgba(255,255,255,.08);
    box-shadow: 0 10px 28px rgba(0,0,0,.5);
  }
  .xp-title{ color:#eef2f6; }
  .xp-desc, .xp-meta{ color:#cbd5e1; }
  .xp-cta{
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    color:#eef2f6;
    border-color: rgba(255,255,255,.12);
  }
  .xp-card.featured{
    background: color-mix(in srgb, #0b0f12 72%, transparent);
  }
}

/* ====== 響應式：較大螢幕擴至 3 欄 ====== */
@media (min-width: 760px){
  .xp-list{
    grid-template-columns: repeat(3, 1fr);
  }
  /* 仍保留第一張（或 .featured）全寬橫跨 */
  .xp-card.featured,
  .xp-list > .xp-card:first-child{
    grid-column: 1 / -1;
  }
}