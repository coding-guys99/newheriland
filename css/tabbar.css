/* ===== HeriLand Tabbar — Drop-in Override ===== */
:root{
  /* Base size */
  --tabbar-h: 64px; /* 你實際的bar高度 */
  /* Safe area (iOS 瀏海) */
  --safe-b: env(safe-area-inset-bottom, 0px);
  /* bar + safe-area */
  --tabbar-safe-h: calc(var(--tabbar-h) + var(--safe-b));

  /* 顏色與外觀（可依品牌調整） */
  --tabbar-bg: rgba(20,24,22,0.72);       /* 半透明深色 */
  --tabbar-blur: 12px;                    /* 背景模糊 */
  --tabbar-border: rgba(255,255,255,.08); /* 上邊線 */
  --tabbar-ink: rgba(255,255,255,.14);    /* 活動指示器 */
  --tabbar-txt: rgba(255,255,255,.86);
  --tabbar-txt-dim: rgba(255,255,255,.55);
  --tabbar-accent: #E8D6A7;               /* Champagne Gold */
}

/* 內容永不被遮：直接給主要容器留底部空間 */
html, body{
  height: 100%;
}
body, main, .page-root{
  padding-bottom: var(--tabbar-safe-h);
}
@supports(padding: max(0px)){
  body, main, .page-root{
    padding-bottom: max(var(--tabbar-h), var(--tabbar-safe-h));
  }
}

/* 不再需要 spacer（若存在就隱藏） */
.tabbar-spacer{ display:none !important; }

/* --- Tabbar 外層 --- */
.tabbar{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  height: var(--tabbar-h);
  z-index: 1000;
  display: grid;
  place-items: stretch;
  pointer-events: auto;
  /* iOS 鍵盤彈出時避免抖動 */
  transform: translateZ(0);
}

/* 背景半透明 + 模糊 + 上邊線 */
.tabbar .tabbar-bg{
  position:absolute; inset:0;
  background: var(--tabbar-bg);
  -webkit-backdrop-filter: blur(var(--tabbar-blur));
  backdrop-filter: blur(var(--tabbar-blur));
  border-top: 1px solid var(--tabbar-border);
  padding-bottom: var(--safe-b);
}

/* 內層 capsule 排列 */
.tabbar .capsule{
  position: relative;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 1fr;
  align-items: center;
  height: 100%;
  padding: 6px 8px calc(6px + var(--safe-b));
  gap: 2px;
}

/* 活動指示器（底下墨滴/底線） */
.tabbar .ink{
  position: absolute;
  left: 0; bottom: calc(2px + var(--safe-b));
  width: 20%;
  height: 3px;
  background: var(--tabbar-accent);
  border-radius: 2px;
  opacity: .9;
  transition: transform .25s ease, width .2s ease, left .2s ease;
  pointer-events:none;
}

/* 通用按鈕樣式（可點擊區至少 44px） */
.tabbar .tab{
  position: relative;
  appearance: none;
  border: 0;
  background: transparent;
  color: var(--tabbar-txt-dim);
  min-width: 44px; min-height: 44px;
  padding: 6px 0;
  margin: 0;
  font: inherit;
  display: grid;
  place-items: center;
  gap: 2px;
  border-radius: 10px;
  transition: color .2s ease, background .2s ease;
  outline: none;
}
.tabbar .tab:hover{ background: rgba(255,255,255,.06); }
.tabbar .tab.is-active,
.tabbar .tab[aria-selected="true"]{
  color: var(--tabbar-txt);
}

/* 圖標 + 文字排列 */
.tabbar .tab .ico{
  font-size: 18px; line-height: 1;
}
.tabbar .tab .txt{
  font-size: 12px; line-height: 1.1;
  letter-spacing: .2px;
}

/* 依 active 項目移動 ink（5個分頁 = 20% 寬） */
.tabbar .tab:nth-of-type(1)[aria-selected="true"] ~ .ink{ left: 0%;    width: 20%; transform: translateX(0%); }
.tabbar .tab:nth-of-type(2)[aria-selected="true"] ~ .ink{ left: 20%;   width: 20%; transform: translateX(0%); }
.tabbar .tab:nth-of-type(3)[aria-selected="true"] ~ .ink{ left: 40%;   width: 20%; transform: translateX(0%); }
.tabbar .tab:nth-of-type(4)[aria-selected="true"] ~ .ink{ left: 60%;   width: 20%; transform: translateX(0%); }
.tabbar .tab:nth-of-type(5)[aria-selected="true"] ~ .ink{ left: 80%;   width: 20%; transform: translateX(0%); }

/* 鍵盤彈出時（行動裝置輸入不被擋） */
.kb-open .tabbar{ transform: translateY(100%); }
.kb-open body, .kb-open main, .kb-open .page-root{
  /* 若你希望鍵盤打開時也拿掉 padding，可視需求加上 */
  /* padding-bottom: 0 !important; */
}

/* 動畫偏好 */
@media (prefers-reduced-motion: reduce){
  .tabbar .ink,
  .tabbar .tab{ transition: none; }
}

/* 亮色主題（可選） */
@media (prefers-color-scheme: light){
  :root{
    --tabbar-bg: rgba(255,255,255,0.82);
    --tabbar-border: rgba(0,0,0,.08);
    --tabbar-txt: rgba(0,0,0,.86);
    --tabbar-txt-dim: rgba(0,0,0,.58);
    --tabbar-ink: rgba(0,0,0,.18);
  }
}
