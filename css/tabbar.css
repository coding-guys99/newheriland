/* ===== Tabbar (fixed, translucent, non-rounded outer, safe-area aware) ===== */
:root{
  --tabbar-h: 64px;
  --tabbar-bg: rgba(15,18,25,.58);
  --tabbar-blur: 14px;
  --tabbar-fg: #e8edf3;
  --tabbar-fg-dim: #b8c0cc;
  --tabbar-accent: #84cc16;
  --tabbar-shadow: 0 -8px 24px rgba(0,0,0,.22);
}

@supports (color: color-mix(in oklab, white, black)) {
  :root{ --tabbar-bg: color-mix(in oklab, #0b0e14 62%, transparent); }
}

.tabbar{
  position: fixed;
  left: 0; right: 0; bottom: 0;
  z-index: 1000;
  height: calc(var(--tabbar-h) + env(safe-area-inset-bottom, 0px));
  display: grid;
  place-items: stretch;
  pointer-events: none;
}

.tabbar .tabbar-bg{
  position: absolute; inset: 0;
  background: var(--tabbar-bg);
  -webkit-backdrop-filter: saturate(140%) blur(var(--tabbar-blur));
  backdrop-filter: saturate(140%) blur(var(--tabbar-blur));
  box-shadow: var(--tabbar-shadow);
  border-top: 1px solid rgba(255,255,255,.06);
  pointer-events: none;
}

/* 這裡改成 flex，自適應 4 / 5 / 6 顆 */
.tabbar .capsule{
  position: relative;
  margin: 0 auto;
  width: min(100%, 980px);
  height: 100%;
  display: flex;                        /* ← 原本是 grid */
  align-items: flex-end;
  justify-content: space-evenly;        /* ← 平均分布，不會靠一邊 */
  padding: 8px 8px calc(env(safe-area-inset-bottom, 0px));
  gap: 4px;
  pointer-events: auto;
}

/* 每一顆自己吃空間，就算只有 4 顆也會平均 */
.tabbar .tab{
  appearance: none;
  background: transparent;
  border: 0;
  padding: 8px 6px 10px;
  min-width: 54px;
  height: var(--tabbar-h);
  color: var(--tabbar-fg-dim);
  font: 500 12px/1.2 ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Noto Sans TC", Arial;
  letter-spacing: .2px;
  display: grid;
  justify-items: center;
  align-content: end;
  gap: 4px;
  border-radius: 12px;
  position: relative;
  transition: color .18s ease, transform .18s ease, background .18s ease;
  outline: none;
  flex: 1 1 0;                           /* ← 關鍵：平均吃寬 */
  max-width: 120px;                       /* ← 避免 label 很短時太寬，可調整 */
}

.tabbar .tab .ico{
  font-size: 20px;
  line-height: 1;
  transform: translateY(1px);
}
.tabbar .tab .txt{
  font-size: 11px;
  opacity: .9;
}

@media (hover:hover){
  .tabbar .tab:hover{
    background: rgba(255,255,255,.06);
    color: var(--tabbar-fg);
  }
}

.tabbar .tab:focus-visible{
  box-shadow: 0 0 0 2px rgba(180,220,255,.6) inset;
  color: var(--tabbar-fg);
}

.tabbar .tab.is-active{
  color: var(--tabbar-fg);
  transform: translateY(-2px);
}

.tabbar .tab::after{
  content: "";
  position: absolute;
  left: 16%; right: 16%;
  bottom: 6px;
  height: 3px;
  border-radius: 3px;
  background: transparent;
  transition: background .18s ease, transform .18s ease;
}
.tabbar .tab.is-active::after{
  background: var(--tabbar-accent);
  transform: translateY(-2px);
}

.tabbar .tab .badge{
  position: absolute;
  top: 6px; right: 18%;
  width: 8px; height: 8px;
  background: #ef4444;
  border-radius: 50%;
  box-shadow: 0 0 0 2px rgba(0,0,0,.25);
}

.tabbar-spacer{
  height: calc(var(--tabbar-h) + env(safe-area-inset-bottom, 0px));
}

.theme-dark .tabbar .tabbar-bg{
  border-top-color: rgba(255,255,255,.08);
}
.theme-dark .tabbar .tab{
  color: #c8d0dc;
}