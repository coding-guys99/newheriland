/* =========================================================
   HeriLand â€” Detail (Aï½œRiverline)
   JS é’©å­ä¸å˜ï¼Œä»…è°ƒæ•´è§†è§‰
   ========================================================= */

:root{
  --detail-bg:#f7f7f8;
  --detail-line:rgba(0,0,0,.08);
  --ink:#111827;
  --ink-2:#374151;
  --ink-3:#6b7280;
  --brand:#2E5E4E;
  --brand-2:#2C6B6F;
  --pill:#f1f3f5;
}

/* Page */
.detail{background:var(--detail-bg);min-height:100dvh;display:block;}
.d-scroll{padding-bottom:20px;}
/* AppBar */
.d-appbar{position:sticky;top:0;z-index:20;display:flex;align-items:center;gap:10px;padding:10px 12px;background:#fff;border-bottom:1px solid var(--detail-line);}
.d-title{margin:0;font-size:16px;font-weight:700;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.icon-btn{appearance:none;border:0;background:transparent;cursor:pointer;font-size:18px;line-height:1;}

/* ---------------- Hero ---------------- */
.d-hero{position:relative;}
.c-wrap{position:relative;background:#e5e7eb;overflow:hidden;}
.c-track{display:flex;gap:0;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;height:min(230px,55vh);}
.c-track::-webkit-scrollbar{display:none;}
.c-track>img{flex:0 0 100%;width:100%;height:100%;object-fit:cover;scroll-snap-align:start;background:#ddd;}
.c-arrow{position:absolute;top:50%;transform:translateY(-50%);width:34px;height:34px;border:none;border-radius:50%;background:rgba(0,0,0,.35);color:#fff;display:grid;place-items:center;cursor:pointer;backdrop-filter:blur(6px);z-index:3;}
#cPrev{left:8px;} #cNext{right:8px;}
.c-dots{position:absolute;left:0;right:0;bottom:8px;display:flex;gap:6px;justify-content:center;z-index:3;}
.c-dots button{width:7px;height:7px;border-radius:999px;border:0;background:rgba(255,255,255,.65);}
.c-dots button[aria-current="true"]{width:16px;background:#fff;}
/* Riverline */
.riverline{height:2px;background:linear-gradient(90deg,rgba(46,94,78,.85),rgba(44,107,111,.85));opacity:.95;}
@media (prefers-color-scheme:dark){
  .riverline{background:linear-gradient(90deg,rgba(46,94,78,.6),rgba(44,107,111,.6));}
}

/* ---------------- Title Band ---------------- */
.d-band{padding:12px 12px 0;}
.d-meta-inline{display:flex;flex-wrap:wrap;gap:8px;}
.d-meta-inline .chip{display:inline-flex;align-items:center;gap:4px;padding:4px 9px 5px;border-radius:999px;background:var(--pill);font-size:12px;font-weight:600;color:var(--ink);}
.d-meta-inline .chip.ok{background:#DCFCE7;color:#166534;}
.d-meta-inline .chip.off{background:#FEE2E2;color:#991B1B;}
.d-tags-inline{padding-top:6px;display:flex;flex-wrap:wrap;gap:6px;color:var(--ink-3);font-size:13px;line-height:1.4;}
.d-tags-inline .tag{background:transparent;border:1px solid var(--detail-line);border-radius:999px;padding:5px 10px 6px;font-size:12px;color:#374151;}

/* ---------------- Quick Actionsï¼ˆæ¨ªå‘è½¨ï¼‰ ---------------- */
.d-quick{padding:12px 0 0;margin:0 0 4px;overflow:auto;}
.d-quick--rail{display:flex;gap:10px;padding-left:12px;padding-right:12px;}
.d-quick a{flex:0 0 auto;display:flex;align-items:center;gap:8px;padding:9px 12px;border-radius:999px;border:1px solid rgba(0,0,0,.08);background:#fff;text-decoration:none;font-size:13px;font-weight:600;color:#111;box-shadow:none;transition:transform .08s ease;}
.d-quick a:active{transform:translateY(1px);}
.d-quick a[aria-disabled="true"]{opacity:.38;pointer-events:none;}

/* ---------------- Sectionsï¼ˆæ— å¡ç‰‡ï¼Œåˆ†éš”çº¿ï¼‰ ---------------- */
.d-sec{padding:14px 12px 16px;border-bottom:1px solid var(--detail-line);}
.d-h2{font-size:15px;font-weight:800;margin:0 0 10px;display:flex;align-items:center;gap:8px;}
.d-mark{display:inline-block;width:4px;height:14px;border-radius:2px;background:var(--brand);}
.d-head-row{display:flex;align-items:center;justify-content:space-between;gap:10px;}
.d-desc{color:var(--ink-2);line-height:1.7;font-size:14px;}
/* Address */
#addressCard .d-address{color:#111827;line-height:1.6;word-break:break-word;}
#btnCopyAddr{border:1px solid rgba(0,0,0,.08);background:#fff;border-radius:999px;padding:5px 11px 6px;font-size:12px;cursor:pointer;}
#btnCopyAddr:active{transform:scale(.98);}

/* Hours */
#hoursCard details{list-style:none;}
#hoursCard summary::-webkit-details-marker{display:none;}
.oh-summary{display:flex;align-items:center;justify-content:space-between;gap:12px;cursor:pointer;}
.oh-right{display:flex;align-items:center;gap:10px;}
#detailOpenChip{background:#eee;border-radius:999px;padding:3px 9px 4px;font-size:12px;}
.oh-today{font-size:13px;color:#374151;}
.oh-caret{transition:transform .16s ease;}
#hoursCard details[open] .oh-caret{transform:rotate(180deg);}
.oh-list{display:grid;gap:8px;margin-top:10px;padding-top:6px;border-top:1px dashed rgba(0,0,0,.12);}
.oh-line{display:flex;justify-content:space-between;gap:6px;font-size:13px;}
.oh-line span:first-child{color:#6b7280;}
/* Inline stats */
.d-inline-stats{display:flex;flex-wrap:wrap;gap:12px;margin-top:10px;color:var(--ink-2);font-size:13px;}
.d-inline-stats b{font-weight:700;color:var(--ink);}

/* Location link */
.link-inline{font-size:13px;color:#2563eb;text-decoration:none;}
.link-inline:hover{text-decoration:underline;}

/* Relatedï¼ˆæ¨ªæ»‘ï¼Œæ— é˜´å½±ï¼‰ */
.d-related{display:flex;gap:10px;overflow-x:auto;padding:4px 12px 0;}
.d-related .rec{flex:0 0 56%;text-decoration:none;color:inherit;border:1px solid rgba(0,0,0,.06);border-radius:10px;padding:8px;}
.d-related .rthumb{width:100%;height:110px;border-radius:8px;background:#ddd center/cover no-repeat;margin-bottom:6px;}
.d-related .rname{font-size:12px;text-align:center;}

/* Buttons */
.btn-line{appearance:none;background:transparent;border:1px solid rgba(0,0,0,.12);border-radius:999px;padding:8px 12px;font-size:13px;font-weight:600;color:#111;}
.chip{display:inline-flex;align-items:center;gap:4px;padding:4px 9px 5px;border-radius:999px;background:var(--pill);font-size:12px;font-weight:600;color:var(--ink);}

/* Safe space */
.d-safe{height:14px;}

/* ---------------- Dark mode ---------------- */
@media (prefers-color-scheme:dark){
  .detail{background:#0b0f12;}
  .d-appbar{background:rgba(11,15,18,.88);border-bottom-color:rgba(255,255,255,.06);}
  .d-title{color:#f3f4f6;}
  .d-meta-inline .chip{background:rgba(15,23,42,.45);color:#eef2f6;}
  .d-tags-inline .tag{border-color:rgba(255,255,255,.12);color:#e2e8f0;}
  .d-quick a{background:rgba(11,15,18,.6);border-color:rgba(255,255,255,.08);color:#f3f4f6;}
  .d-sec{border-bottom-color:rgba(255,255,255,.12);}
  .d-desc{color:#d9e2eb;}
  #btnCopyAddr{background:rgba(255,255,255,.05);color:#e2e8f0;border-color:rgba(255,255,255,.12);}
  .oh-list{border-top-color:rgba(255,255,255,.18);}
  .d-related .rec{border-color:rgba(255,255,255,.12);}
}

/* ---------------- Responsive ---------------- */
@media (min-width:720px){
  .d-scroll{max-width:720px;margin:0 auto;}
  .c-track{border-radius:16px;}
}

/* ================= Bottom Sheet (Comments) ================ */
.overlay-sheet{
  position:fixed; inset:0; z-index:60;
  display:grid; place-items:end center;
  background:rgba(0,0,0,.35);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  opacity:0; pointer-events:none;
  transition: opacity .18s ease;
}
.overlay-sheet.active{ opacity:1; pointer-events:auto; }

/* å¡ç‰‡æœ¬ä½“ */
.overlay-sheet .sheet{
  width:clamp(280px, 100%, 720px);
  background:#fff;
  border-radius:18px 18px 0 0;
  box-shadow:0 -10px 30px rgba(0,0,0,.18);
  transform: translateY(16px);
  transition: transform .22s cubic-bezier(.2,.8,.2,1);
  padding-bottom: max(12px, env(safe-area-inset-bottom));
}
.overlay-sheet.active .sheet{ transform: translateY(0); }

/* é¡¶éƒ¨æ‹–æ‹½æ‰‹æŸ„ */
.sheet-grip{
  width:44px; height:5px; border-radius:999px;
  background:rgba(0,0,0,.12);
  margin:8px auto 2px; pointer-events:none;
}

/* Sheet å¤´éƒ¨ */
.sheet-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 14px 6px;
}
.sheet-title{
  margin:0; font-size:16px; font-weight:800; letter-spacing:.2px;
}
#btnCmtClose{
  width:32px; height:32px; border-radius:8px;
  background:transparent; border:0; cursor:pointer; font-size:16px;
}
#btnCmtClose:hover{ background:rgba(0,0,0,.06); }

/* å†…å®¹æ»šåŠ¨åŒº */
.sheet-body{
  max-height:min(62vh, 520px);
  overflow:auto;
  padding:6px 14px 10px;
}

/* ç©ºæ€ */
.cmt-list:empty::before{
  content:"é‚„æ²’æœ‰ç•™è¨€ï¼Œç•¶ç¬¬ä¸€å€‹å§ ğŸ¥³";
  display:block; color:#6b7280; font-size:13px;
  padding:8px 2px 16px;
}

/* è¯„è®ºé¡¹ï¼ˆå¤´åƒ + å†…å®¹å¡ï¼‰ */
.cmt-item{
  display:grid; grid-template-columns:auto 1fr; gap:10px;
  padding:0; margin-bottom:10px;
}
.cmt-avatar{
  width:36px; height:36px; flex:0 0 36px;
  border-radius:999px; background:#2E5E4E; color:#fff;
  display:grid; place-items:center; font-weight:700; font-size:14px;
  letter-spacing:.02em; box-shadow:0 3px 10px rgba(46,94,78,.2);
}
.cmt-item .body,
.cmt-item .cmt-body{ /* å…¼å®¹ä½ çš„æ—§ç±»å */
  background:rgba(0,0,0,.035);
  border:1px solid rgba(0,0,0,.06);
  border-radius:12px;
  padding:8px 10px;
}
.cmt-item .top{
  display:flex; align-items:baseline; gap:6px; margin-bottom:4px;
}
.cmt-item .name{ font-weight:700; font-size:13px; color:#111827; }
.cmt-item .time{ font-size:11px; color:#94a3b8; }
.cmt-item .body{ font-size:13px; color:#374151; line-height:1.45; white-space:pre-wrap; }

/* è¾“å…¥åŒºå›ºå®šåœ¨åº•éƒ¨ */
.sheet-foot{
  position:sticky; bottom:0;
  display:flex; gap:8px; align-items:center;
  padding:10px 12px 12px;
  background:linear-gradient(#fff, #fff);
  border-top:1px solid rgba(0,0,0,.06);
}
.cmt-input{ flex:1; }
#cmtText{
  width:100%;
  border:1px solid rgba(0,0,0,.08);
  background:#fff; color:#111827;
  border-radius:999px; padding:10px 14px;
  font-size:14px; outline:none;
  transition: box-shadow .15s ease, border-color .15s ease;
}
#cmtText:focus{
  border-color:rgba(46,94,78,.35);
  box-shadow:0 0 0 4px rgba(46,94,78,.12);
}

/* å‘é€æŒ‰é’®ï¼ˆä¸»è‰²ï¼‰ */
.btn.primary#btnCmtSend{
  border:0; border-radius:999px; padding:10px 14px;
  font-weight:700; font-size:14px;
  color:#fff; background:#2E5E4E;
  box-shadow:0 8px 18px rgba(46,94,78,.28);
  transition: transform .06s ease, filter .15s ease;
}
.btn.primary#btnCmtSend:active{ transform: translateY(1px); }
.btn.primary#btnCmtSend:disabled{ opacity:.45; box-shadow:none; }

/* ===== ä¼˜åŒ–æ—§çš„é¢„è§ˆå—/æŒ‰é’®ï¼ˆå¯é€‰ï¼‰ ===== */
#detailCommentsCard .btn-line{
  margin-top:8px; border-radius:10px; padding:10px 12px;
}

/* ================= Dark mode ================= */
@media (prefers-color-scheme: dark){
  .overlay-sheet{ background:rgba(0,0,0,.55); }
  .overlay-sheet .sheet{
    background:rgba(14,18,22,.96);
    box-shadow:0 -12px 40px rgba(0,0,0,.5);
  }
  .sheet-grip{ background:rgba(255,255,255,.18); }
  .sheet-title{ color:#e5e7eb; }
  #btnCmtClose:hover{ background:rgba(255,255,255,.06); }
  .cmt-item .body,
  .cmt-item .cmt-body{
    background:rgba(255,255,255,.04);
    border-color:rgba(255,255,255,.08);
  }
  .cmt-item .name{ color:#e5e7eb; }
  .cmt-item .body{ color:#cbd5e1; }
  #cmtText{
    background:rgba(255,255,255,.06);
    color:#fff; border-color:rgba(255,255,255,.12);
  }
  #cmtText:focus{
    border-color:rgba(46,94,78,.6);
    box-shadow:0 0 0 4px rgba(46,94,78,.2);
  }
  .sheet-foot{ background:linear-gradient(rgba(14,18,22,.96), rgba(14,18,22,.96)); border-top-color:rgba(255,255,255,.08); }
}

/* ============ iOS å®‰å…¨åŒº & æ‹–æ‹½æ„Ÿ ============ */
@supports (padding: max(0px)) {
  .overlay-sheet .sheet{ padding-bottom:max(12px, env(safe-area-inset-bottom)); }
}