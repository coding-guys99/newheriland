/* ===== 通用詳情（Journey Card Layout） ===== */

/* Overlay：鎖背景 + 半透明幕 */
#detailOverlay.overlay-page{
  background: color-mix(in srgb, rgba(10,12,16,.42) 100%, transparent);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  backdrop-filter: blur(8px) saturate(120%);
  display:grid; grid-template-rows:auto 1fr;
  overscroll-behavior: contain;
}

/* 玻璃卡 */
.detail-card{
  margin: 12px 12px calc(14px + env(safe-area-inset-bottom));
  background: color-mix(in srgb, #ffffff 82%, transparent);
  border: 1px solid rgba(255,255,255,.35);
  border-radius: 18px;
  box-shadow: 0 18px 50px rgba(0,0,0,.28);
  overflow: hidden;
  display: grid; grid-template-rows: auto 1fr;
  max-height: calc(100dvh - 110px);
}
.detail-card .detail-body{ overflow:auto; padding: 12px; }

/* Hero */
.detail-hero{
  width:100%; aspect-ratio:16/9; border-radius: 16px;
  margin: 12px; background: #e5e7eb center/cover no-repeat;
  position:relative; overflow:hidden; box-shadow:0 12px 32px rgba(0,0,0,.15);
}
.detail-hero::after{
  content:""; position:absolute; inset:auto 0 0 0; height:40%;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,.22));
  pointer-events:none;
}

/* 標題 + Meta + 摘要 */
.detail-h2{ margin: 6px 2px 2px; font-weight: 900; font-size: 22px; letter-spacing:.2px; color:#0f172a; }
.detail-meta{ display:flex; flex-wrap:wrap; gap:8px 12px; color:#64748b; font-size:13.5px; margin:6px 2px 4px; }
.detail-summary{ color:#334155; font-size:14px; line-height:1.6; margin:6px 2px 10px; }

/* Step / 亮點卡 */
.detail-steps{ display:grid; gap:10px; margin-top:6px; }
.step{
  display:flex; align-items:flex-start; gap:10px;
  background: color-mix(in srgb, #ffffff 80%, transparent);
  border-radius:12px; padding:10px 12px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
}
.step .dot{ width:8px; height:8px; border-radius:50%; background:#2E5E4E; margin-top:6px; }
.step .t{ font-weight:800; color:#111827; font-size:14.5px; }
.step .s{ margin-top:2px; color:#64748b; font-size:13px; line-height:1.4; }

/* CTA */
.detail-actions{
  display:grid; grid-template-columns:1fr 1fr; gap:10px; margin: 12px 0 4px;
}
.btn{
  appearance:none; padding:12px 14px; border-radius:12px; font-weight:800; cursor:pointer;
  border:1px solid rgba(0,0,0,.08);
  background: color-mix(in srgb, #ffffff 86%, transparent);
}
.btn.primary{
  color:#fff; border-color:#2E5E4E;
  background: linear-gradient(180deg, #2E5E4E, #244a3e);
  box-shadow: 0 8px 22px rgba(46,94,78,.35);
}

/* Header（穩定層次） */
#detailOverlay .subappbar{
  background: color-mix(in srgb, #ffffff 92%, transparent);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  backdrop-filter: blur(6px) saturate(120%);
  border-bottom: 1px solid rgba(0,0,0,.06);
}

/* 鎖背景滾動 */
body.no-scroll{ height:100vh; overflow:hidden !important; touch-action:none; }

/* 暗色 */
@media (prefers-color-scheme: dark){
  .detail-card{ background: color-mix(in srgb, #0b0f12 74%, transparent); border-color: rgba(255,255,255,.18); box-shadow: 0 20px 60px rgba(0,0,0,.6); }
  .detail-h2{ color:#e5e7eb; }
  .detail-summary{ color:#d1d5db; }
  .btn{ background: color-mix(in srgb, #0b0f12 70%, transparent); border-color: rgba(255,255,255,.12); color:#eef2f6; }
}