/* ====== Posts page polish (drop-in) ====== */

/* 基礎色彩與陰影 */
:root{
  --p-bg:#fff;
  --p-text:#101418;
  --p-muted:#6b7280;
  --p-chip:#eef2f6;
  --p-chip-text:#111827;
  --p-line:#eef0f3;
  --p-card: #fff;
  --p-shadow: 0 6px 24px rgba(16,24,40,.08);
  --p-shadow-sm: 0 2px 10px rgba(16,24,40,.06);
  --p-brand:#f1c24f; /* 可改你的品牌色 */
}
.dark{
  --p-bg:#0c0f13;
  --p-text:#e5e7eb;
  --p-muted:#9aa3af;
  --p-chip:#1a232e;
  --p-chip-text:#e5e7eb;
  --p-line:#15202b;
  --p-card:#0f141a;
  --p-shadow: 0 6px 24px rgba(0,0,0,.35);
  --p-shadow-sm: 0 2px 10px rgba(0,0,0,.28);
}

/* Page scaffold */
section.posts{
  background:var(--p-bg);
}
.posts .p-scroll{ padding: 8px 16px 24px; }
.posts .p-toolbar{
  position: sticky; top: calc(var(--appbar-h,56px) + 4px);
  background: linear-gradient(to bottom, var(--p-bg) 70%, transparent);
  z-index: 2; padding-bottom: 8px; margin-bottom: 4px;
}

/* Sort chips */
.p-sort{ display:flex; gap:10px; margin: 4px 0 10px; }
.p-sort .chip{
  appearance: none; border:0; padding:8px 14px; border-radius:20px;
  font: 600 14px/1 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background:var(--p-chip); color:var(--p-chip-text); box-shadow: var(--p-shadow-sm);
}
.p-sort .chip.is-on{ background:#111827; color:#fff; }
.dark .p-sort .chip.is-on{ background:#e5e7eb; color:#111827; }

/* Hot tag bar */
.p-tags{ display:flex; gap:8px; flex-wrap:wrap; }
.p-tags .tag{
  border:0; background:var(--p-chip); color:var(--p-chip-text);
  padding:6px 12px; border-radius:999px; font:500 13px/1 system-ui, -apple-system, sans-serif;
  box-shadow: var(--p-shadow-sm);
}
.p-tags .tag.is-on{ outline:2px solid var(--p-brand); }

/* Grid */
.p-list{
  --gap: 14px;
  display:grid; grid-template-columns:repeat(2, minmax(0,1fr));
  gap: var(--gap); margin-top: 12px;
}
@media (min-width:740px){
  .p-list{ grid-template-columns:repeat(3,minmax(0,1fr)); }
}

/* Card */
.post{
  background:var(--p-card); border-radius:18px; overflow:hidden;
  box-shadow: var(--p-shadow); display:flex; flex-direction:column;
  transition: transform .2s ease, box-shadow .2s ease;
}
.post:active{ transform: translateY(1px) scale(.998); }

/* Media (4:5) */
.post .post-media{
  position:relative; display:block; aspect-ratio:4/5; overflow:hidden; background:#e9eef5;
}
.post .post-media img{
  width:100%; height:100%; object-fit:cover; display:block;
  opacity:0; transform:scale(1.02); transition:opacity .35s ease, transform .35s ease;
}
.post .post-media img[data-loaded="1"]{ opacity:1; transform:scale(1); }

/* 右上分類膠囊 & 右下角貼紙 */
.pm-badge{
  position:absolute; top:10px; left:10px; z-index:1;
  background:rgba(17,24,39,.85); color:#fff; padding:6px 10px; border-radius:999px;
  font:600 12px/1 system-ui; backdrop-filter:saturate(1.2) blur(6px);
}
.pm-sticker{
  position:absolute; right:10px; bottom:10px; z-index:1;
  background:rgba(255,255,255,.9); border-radius:10px; padding:6px 8px; font:700 10px/1 system-ui;
  box-shadow: var(--p-shadow-sm); display:none; /* 需要時再顯示 */
}
.pm-vid{
  position:absolute; right:10px; top:10px; z-index:1;
  background:rgba(0,0,0,.7); color:#fff; padding:4px 6px; border-radius:8px; font:700 11px/1;
}

/* Body */
.post .post-body-wrap{ padding:12px 12px 10px; display:flex; flex-direction:column; gap:10px; }
.post .post-title{
  font: 700 18px/1.25 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  letter-spacing:.2px; color:var(--p-text);
  display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}

/* Meta row */
.post .post-meta{
  display:flex; align-items:center; justify-content:space-between; gap:10px; color:var(--p-muted);
  font: 500 12px/1 system-ui;
}
.post .pm-left{ display:flex; align-items:center; gap:8px; min-width:0; }
.post .post-avatar{
  width:24px; height:24px; border-radius:50%; object-fit:cover; background:#dfe6ee;
  box-shadow: var(--p-shadow-sm);
}
.post .post-author{
  max-width:90px; white-space:nowrap; text-overflow:ellipsis; overflow:hidden;
}
.post .post-time{ opacity:.8; }

/* Action buttons */
.btn-icon{
  appearance:none; border:0; background:transparent; padding:8px; border-radius:10px;
  display:inline-flex; align-items:center; justify-content:center; gap:6px; color:var(--p-muted);
}
.btn-like.is-on{ color:#e11d48; }

/* Place link & tags */
.post .post-ft{ display:flex; align-items:center; justify-content:space-between; padding:0 12px 12px; }
.post .btn-place{
  color:var(--p-muted); text-decoration:none; font:600 12px/1 system-ui;
  padding:6px 10px; background:var(--p-chip); border-radius:10px;
}
.post .post-tags{ display:flex; gap:8px; padding:0 12px 12px; flex-wrap:wrap; }
.post .post-tags .tag{
  background:var(--p-chip); color:var(--p-chip-text); padding:5px 10px; border-radius:999px; font:600 12px/1;
}
.post .post-tags .tag.more{ opacity:.8; }

/* Skeletons */
.p-skeleton{ display:grid; grid-template-columns:repeat(2,1fr); gap:14px; margin-top:12px; }
.p-skeleton .sk-card{
  height: calc(100vw * .5 * 1.25); /* 對齊 4:5 大小；0.5 來自 2 欄 */
  max-height: 360px; border-radius:18px; overflow:hidden; background:linear-gradient(90deg,#eef2f7, #f6f8fb, #eef2f7);
  animation: skShine 1.2s linear infinite;
  box-shadow: var(--p-shadow);
}
@keyframes skShine{
  0%{ background-position:-200% 0; }
  100%{ background-position:200% 0; }
}

/* Load more spinner block */
.p-more{ display:flex; justify-content:center; align-items:center; gap:10px; padding:14px 0; }
.p-more-sk{ width:22px; height:22px; border-radius:50%; border:3px solid #d1d5db; border-top-color:#111827; animation:spin .9s linear infinite; }
@keyframes spin{ to{ transform:rotate(360deg);} }

/* Empty / error */
.p-empty, .p-error{ padding: 40px 12px; color: var(--p-muted); text-align:center; }
.p-empty a{ color: var(--p-brand); text-decoration: none; font-weight: 700; }

/* Safari 圓角裁切銳邊優化 */
.post, .post .post-media{ -webkit-mask-image: -webkit-radial-gradient(white, black); }
