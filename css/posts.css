/* ======================= HeriLand — Posts Cards ======================= */
:root{
  --pl-gap: 12px;                 /* 卡片間距 */
  --pl-radius: 14px;              /* 卡片圓角 */
  --pl-shadow: 0 4px 18px rgba(0,0,0,.08);
  --pl-shadow-hover: 0 6px 24px rgba(0,0,0,.10);

  --pl-card-bg: #fff;
  --pl-text: rgba(0,0,0,.86);
  --pl-text-dim: rgba(0,0,0,.58);
  --pl-border: rgba(0,0,0,.06);

  --pl-badge-bg: rgba(0,0,0,.6);
  --pl-badge-text: #fff;

  --pl-accent: #E8D6A7;          /* Champagne Gold */
  --pl-green: #294A3A;           /* Forest Green (hover重點) */
}

/* 容器：雙欄瀑布流 */
.posts .p-list{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--pl-gap);
  padding: var(--pl-gap);
}

/* 大螢幕：可視需要改為三欄 */
@media (min-width: 900px){
  .posts .p-list{
    grid-template-columns: repeat(3, 1fr);
  }
}

/* 卡片 */
.posts .post{
  background: var(--pl-card-bg);
  color: var(--pl-text);
  border: 1px solid var(--pl-border);
  border-radius: var(--pl-radius);
  box-shadow: var(--pl-shadow);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto auto auto;
  gap: 8px;
  padding: 10px;
  transition: box-shadow .18s ease, transform .18s ease;
}
.posts .post:focus-within,
.posts .post:hover{
  box-shadow: var(--pl-shadow-hover);
  transform: translateY(-2px);
}

/* 媒體區：固定比例 + 漸層遮罩 */
.posts .post-media{
  position: relative;
  display: block;
  border-radius: calc(var(--pl-radius) - 4px);
  overflow: hidden;
  background: #eee;
  /* 手機雙欄：4:5 */
  aspect-ratio: 4 / 5;
  isolation: isolate;
}
@media (min-width: 600px){
  /* 大螢幕/寬容器：16:9 */
  .posts .post-media{ aspect-ratio: 16 / 9; }
}

/* 圖片填充（若用 <img>） */
.posts .post-media img{
  width: 100%; height: 100%; object-fit: cover; display: block;
  transform: scale(1.001);
  transition: transform .25s ease, opacity .25s ease;
  opacity: 0.001;
}
.posts .post-media img[data-loaded="1"]{ opacity: 1; }
.posts .post:hover .post-media img{ transform: scale(1.02); }

/* 底部漸層（加強文字對比） */
.posts .post-media::after{
  content: ""; position: absolute; inset: 0 0 0 0;
  background: linear-gradient(0deg, rgba(0,0,0,.55), rgba(0,0,0,0) 56%);
  pointer-events: none;
  opacity: .9;
}

/* 左下：分類標籤 */
.posts .pm-badge{
  position: absolute; left: 8px; bottom: 8px;
  z-index: 2;
  padding: 2px 8px;
  font-size: 12px; line-height: 18px; font-weight: 600;
  color: var(--pl-badge-text);
  background: var(--pl-badge-bg);
  border-radius: 999px;
}

/* 右下：圓形貼紙（活動/AI） */
.posts .pm-sticker{
  position: absolute; right: 8px; bottom: 8px;
  z-index: 2;
  width: 36px; height: 36px; border-radius: 50%;
  display: grid; place-items: center;
  background: #fff;
  color: #1a1a1a;
  font-size: 12px; font-weight: 700;
  box-shadow: 0 4px 12px rgba(0,0,0,.2);
}

/* 右上：影片角標 */
.posts .pm-vid{
  position: absolute; right: 8px; top: 8px;
  z-index: 2;
  font-size: 11px; line-height: 1;
  color: #000;
  background: rgba(255,255,255,.9);
  border-radius: 6px;
  padding: 6px 7px;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
}

/* 標題（兩行截斷） */
.posts .post-title{
  margin: 6px 2px 0; padding: 0;
  font-size: 15.5px; font-weight: 600; line-height: 1.3;
  color: var(--pl-text);
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Meta 行：作者＋時間＋右側統計 */
.posts .post-meta{
  display: flex; align-items: center; justify-content: space-between;
  gap: 8px; margin: 2px 2px 4px;
}
.posts .post-meta-left{
  display: inline-flex; align-items: center; gap: 6px; min-width: 0;
  color: var(--pl-text-dim); font-size: 12.5px;
}
.posts .post-avatar{
  width: 24px; height: 24px; border-radius: 50%; object-fit: cover; display: block;
}
.posts .post-author{
  max-width: 160px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.posts .post-time{ color: var(--pl-text-dim); font-variant-numeric: tabular-nums; }
.posts .post-meta .dot{ opacity: .5; margin: 0 2px; }

.posts .post-meta-right{
  display: inline-flex; align-items: center; gap: 8px;
}
.posts .btn-icon{
  appearance: none; border: 0; background: transparent;
  width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center;
  color: var(--pl-text-dim); cursor: pointer;
}
.posts .btn-icon:hover{ background: rgba(0,0,0,.05); color: var(--pl-green); }
.posts .btn-like.is-on{ color: var(--pl-green); }
.posts .post-views{
  font-size: 12.5px; color: var(--pl-text-dim);
}

/* Tags：最多 2 個，超過以 +n 表示（由 JS 生成） */
.posts .post-tags{
  display: flex; flex-wrap: wrap; gap: 6px; margin: 0 2px 2px;
}
.posts .post-tags .tag{
  font-size: 12px; line-height: 20px;
  color: var(--pl-text); background: rgba(0,0,0,.06);
  border: 1px solid rgba(0,0,0,.06);
  border-radius: 999px; padding: 0 8px; user-select: none;
}
.posts .post-tags .tag.more{
  color: var(--pl-text-dim);
}

/* Skeleton */
.posts .p-skeleton{
  display: grid; grid-template-columns: 1fr 1fr; gap: var(--pl-gap);
  padding: var(--pl-gap);
}
.posts .p-skeleton .sk-card{
  height: 260px; border-radius: var(--pl-radius);
  background: linear-gradient(90deg, #eee 25%, #f5f5f5 37%, #eee 63%);
  background-size: 400% 100%; animation: psk 1.2s ease infinite;
  box-shadow: var(--pl-shadow);
}
@keyframes psk{ 0%{background-position: 100% 50%} 100%{background-position: 0 50%} }

/* Error / Empty 內距一致 */
.posts .p-error, .posts .p-empty{ padding: 16px; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .posts .post, .posts .post-media img{ transition: none; }
}

/* 暗色模式 */
@media (prefers-color-scheme: dark){
  :root{
    --pl-card-bg: rgba(32,36,34,.96);
    --pl-text: rgba(255,255,255,.92);
    --pl-text-dim: rgba(255,255,255,.65);
    --pl-border: rgba(255,255,255,.08);
    --pl-badge-bg: rgba(0,0,0,.55);
  }
  .posts .btn-icon:hover{ background: rgba(255,255,255,.08); }
  .posts .post-media{ background:#111; }
}

/* 讓整張卡片可點（可選） */
.posts .post a.post-media{ outline: none; }
.posts .post a.post-media:focus-visible{
  box-shadow: 0 0 0 3px var(--pl-accent);
}
