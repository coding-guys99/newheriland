/* =========================================================
   HeriLand — Explore page styles
   專給 data-page="explore" + explore 的詳細頁/篩選
   ========================================================= */

/* ===== City Wall (上面 4x3 城市牆) ===== */
.citywall {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-auto-rows: 88px;
  gap: 0px;
  padding: 6px 4px 6px;
}

.citycell {
  appearance: none;
  border: 1px solid rgba(0,0,0,.08);
  background: color-mix(in srgb, #ffffff 92%, transparent);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  backdrop-filter: blur(8px) saturate(120%);
  border-radius: 0px;
  cursor: pointer;
  display: grid;
  grid-template-rows: 1fr auto auto;
  place-items: center;
  padding: 8px 6px;
  box-shadow: 0 8px 20px rgba(0,0,0,.08);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
  position: relative; /* for arrow */
}

.citycell:active {
  transform: translateY(1px);
}

.citycell .ico {
  font-size: 22px;
  line-height: 1;
  opacity: .95
}

.citycell .name {
  font-weight: 800;
  font-size: 12px;
  letter-spacing: .2px
}

.citycell .count {
  font-size: 11px;
  color: #6b7280;
}

.citycell[aria-selected="true"] {
  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.06),
    0 10px 24px rgba(0,0,0,.12);
  background: linear-gradient(180deg, #fff, #fafafa);
}

.citycell[aria-selected="true"]::after {
  content:"";
  position:absolute;
  left:50%;
  bottom:-8px;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:7px solid transparent;
  border-right:7px solid transparent;
  border-top:8px solid rgba(0,0,0,.12);
  filter: drop-shadow(0 2px 2px rgba(0,0,0,.12));
}

.citycell[aria-selected="true"]::before {
  content:"";
  position:absolute;
  left:50%;
  bottom:-7px;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:6px solid transparent;
  border-right:6px solid transparent;
  border-top:7px solid #fff;
}

/* 一整列 All */
.citycell--all {
  grid-column: 1 / -1;
  min-height: 10px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  justify-items: start;
  padding: 8px 8px;
  gap: 0px;
}

.citycell--all .ico { font-size: 18px; }
.citycell--all .name { font-weight: 800; font-size: 13px; }
.citycell--all .count { justify-self: end; font-size: 12px; color: #6b7280; }

@media (prefers-color-scheme: dark){
  .citycell {
    background: color-mix(in srgb, #0b0f12 70%, transparent);
    border-color: rgba(255,255,255,.08);
  }
  .citycell[aria-selected="true"] {
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,.10),
      0 10px 24px rgba(0,0,0,.45);
  }
  .citycell[aria-selected="true"]::before {
    border-top-color: color-mix(in srgb, #0b0f12 78%, transparent);
  }
}

/* ===== Explore 結果區 ===== */
.cityresults {
  margin-top: 10px;
  scroll-margin-top: 76px;
}

.result-head {
  margin: 8px 2px 10px;
  font-weight: 800;
  letter-spacing: .2px;
  color: #233;
}

/* ===== Merchant list (實際店家列表) ===== */
.merchant-list {
  background: #fff;
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,.08);
}
.merchant-list .item {
  display: grid;
  grid-template-columns: 72px 1fr auto;
  gap: 10px;
  padding: 12px 14px;
}
.merchant-list .item + .item {
  border-top: 1px solid rgba(0,0,0,.06);
}
.merchant-list .thumb {
  width: 72px;
  height: 56px;
  border-radius: 10px;
  background: #ddd;
}
.merchant-list .t { font-weight: 800; }
.merchant-list .sub {
  color: #6b7280;
  font-size: 12px
}

@media (prefers-color-scheme: dark){
  .merchant-list {
    background: color-mix(in srgb, #0b0f12 78%, transparent);
    border-color: rgba(255,255,255,.08);
  }
  .merchant-list .item + .item {
    border-top-color: rgba(255,255,255,.08);
  }
}

/* ===== Explore 專用的「高級篩選」抽屜 (advFilter) ===== */
#advFilter.overlay-page {
  position: fixed;
  inset: 0;
  z-index: 1400;
  display: none;
  background: rgba(15, 23, 42, .45);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  grid-template-rows: auto 1fr;
}

#advFilter.overlay-page.active {
  display: grid;
}

#advFilter[hidden] {
  display: none !important;
}

#advFilter .settings-panel {
  height: 100%;
  overflow-y: auto;
  padding-bottom: calc(30px + env(safe-area-inset-bottom));
  background: rgba(248, 250, 252, .88);
  backdrop-filter: blur(3px);
}

@media (prefers-color-scheme: dark) {
  #advFilter.overlay-page {
    background: rgba(15,23,42,.55);
  }
  #advFilter .settings-panel {
    background: rgba(15,23,42,.85);
  }
}

/* ===== Explore Detail / merchant 詳情頁（你原本就放在 app.css 的那一大塊） ===== */
/* 如果這一段確定只有 Explore 的店家詳情會用，就一起搬來這裡 */
/* 下面是精簡版，只搬「detail」開頭的那些 */
.detail {
  background: #f7f7f8;
  min-height: 100%;
}
.d-appbar {
  position: sticky;
  top: 0;
  z-index: 10;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  background:#fff;
  border-bottom:1px solid rgba(0,0,0,.08);
}
.d-title {
  margin:0;
  font-size:16px;
  font-weight:700;
  flex:1;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.d-scroll { padding-bottom: 20px; }

/* 其他 detail-* 規則你也可以整段搬過來，依你要不要共用 */
@media (prefers-color-scheme: dark){
  .detail { background:#0b0f12; }
}